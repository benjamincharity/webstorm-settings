<application>
  <component name="VimEditorSettings">
    <editor />
  </component>
  <component name="VimHistorySettings">
    <history>
      <history-search>
        <entry encoding="base64">XDxyZXRhcmdldGluZ1w+</entry>
        <entry>RetargetingAccountGraphComponent</entry>
        <entry encoding="base64">XDx0YWJsZVdyYXBwZXJcPg==</entry>
        <entry encoding="base64">XDxNT0NLX0FDQ09VTlRfR1JBUEhfREFUQVw+</entry>
        <entry encoding="base64">XDxJUmV0YXJnZXRpbmdDb3VudFNlZ21lbnRcPg==</entry>
        <entry encoding="base64">XDxyZXRhcmdldGluZ0FjY291bnRHcmFwaE1vY2tcPg==</entry>
        <entry>legend</entry>
        <entry encoding="base64">XDx0c0V4cGFuc2lvblBhbmVsQ29udGVudFw+</entry>
        <entry>ready</entry>
        <entry>spendValueAxis</entry>
        <entry encoding="base64">XDxpbXByZXNzaW9uc0NvbG9yXD4=</entry>
        <entry>am4core.color</entry>
        <entry encoding="base64">XDxzcGVuZFZhbHVlQXhpc1w+</entry>
        <entry encoding="base64">XDxvbkNoYXJ0SW5pdGlhbGl6ZVw+</entry>
        <entry encoding="base64">XDxyZWFkeVw+</entry>
        <entry encoding="base64">XDxjb25maWd1cmVDaGFydFw+</entry>
        <entry encoding="base64">XDxjb25zb2xlXD4=</entry>
        <entry encoding="base64">XDxUc0V4cGFuc2lvblBhbmVsTW9kdWxlXD4=</entry>
        <entry encoding="base64">XDxUc0xvYWRpbmdPdmVybGF5TW9kdWxlXD4=</entry>
        <entry>reset</entry>
      </history-search>
      <history-cmd>
        <entry>action Forward</entry>
        <entry>Wa</entry>
        <entry>%s/9\.0\.7/9\.0\.6/g</entry>
        <entry>%s/9\.0\.6/9\.0\.7/g</entry>
        <entry>%s/it(/test(/g</entry>
        <entry>%s/it(`/test(`/g</entry>
        <entry>action com.andrewbrookins.idea.wrap.WrapAction</entry>
        <entry>wa</entry>
        <entry>%s/matFooterCellDef/tsFooterCellDef/g</entry>
        <entry>w</entry>
        <entry encoding="base64">JzwsJz5ub2g=</entry>
        <entry encoding="base64">JzwsJz5zb3J0IGk=</entry>
        <entry>action ESLintFix</entry>
        <entry encoding="base64">YWN0aW9uIA==</entry>
        <entry>action Javascript.Linters.TsLint.Fix</entry>
        <entry>action TsLintFileFixAction</entry>
        <entry>source ~/.ideavimrc</entry>
        <entry>action Javascript.Linters.EsLint.Fix</entry>
        <entry>action RenameElement</entry>
        <entry>noh</entry>
      </history-cmd>
      <history-expr />
      <history-input />
    </history>
  </component>
  <component name="VimKeySettings">
    <shortcut-conflicts>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed P</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed H</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed G</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed V</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed R</text>
      </shortcut-conflict>
      <shortcut-conflict owner="ide">
        <text>ctrl pressed T</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed J</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed N</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed E</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed K</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed A</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed I</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed O</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed F</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed B</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed L</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed U</text>
      </shortcut-conflict>
      <shortcut-conflict owner="vim">
        <text>ctrl pressed D</text>
      </shortcut-conflict>
    </shortcut-conflicts>
  </component>
  <component name="VimMarksSettings">
    <globalmarks />
    <filemarks>
      <file name="$USER_HOME$/Desktop/ui-stackblitz-starter/src/app/app.component.ts" timestamp="1588594913296">
        <mark key="[" line="25" column="0" />
        <mark key="]" line="25" column="0" />
        <mark key="." line="25" column="0" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.scss" timestamp="1588359656655">
        <mark key="'" line="57" column="0" />
        <mark key="[" line="55" column="36" />
        <mark key="]" line="55" column="35" />
        <mark key="." line="55" column="34" />
        <mark key="^" line="55" column="35" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.html" timestamp="1588357836366">
        <mark key="j" line="179" column="16" />
        <mark key="[" line="180" column="37" />
        <mark key="]" line="180" column="65" />
        <mark key="." line="180" column="64" />
        <mark key="^" line="180" column="65" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-graph/account-graph.component.ts" timestamp="1588358698810">
        <mark key="'" line="30" column="0" />
        <mark key="[" line="1" column="26" />
        <mark key="]" line="2" column="2" />
        <mark key="." line="2" column="1" />
        <mark key="^" line="2" column="2" />
      </file>
      <file name="$USER_HOME$/code/Terminus/terminus-ui/projects/library/card/src/card.component.spec.ts" timestamp="1588593422489">
        <mark key="[" line="35" column="0" />
        <mark key="]" line="36" column="41" />
      </file>
      <file name="$USER_HOME$/code/Terminus/terminus-ui/projects/demo/src/app/components/csv-entry/csv-entry.component.html" timestamp="1588594958555">
        <mark key="[" line="32" column="41" />
        <mark key="]" line="32" column="52" />
        <mark key="." line="32" column="51" />
        <mark key="^" line="32" column="52" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" timestamp="1588361376174">
        <mark key="'" line="194" column="0" />
        <mark key="[" line="22" column="13" />
        <mark key="]" line="22" column="27" />
        <mark key="^" line="76" column="39" />
        <mark key="." line="161" column="0" />
      </file>
      <file name="$USER_HOME$/code/Terminus/terminus-ui/projects/demo/src/app/components/csv-entry/csv-entry.component.ts" timestamp="1588595172804">
        <mark key="'" line="8" column="27" />
        <mark key="[" line="20" column="35" />
        <mark key="]" line="23" column="2" />
        <mark key="." line="23" column="1" />
        <mark key="^" line="23" column="2" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.spec.ts" timestamp="1588357936594">
        <mark key="'" line="205" column="32" />
        <mark key="[" line="204" column="28" />
        <mark key="]" line="205" column="34" />
        <mark key="." line="205" column="33" />
        <mark key="^" line="205" column="34" />
      </file>
      <file name="$USER_HOME$/code/Terminus/terminus-ui/projects/library/tsconfig.lib.json" timestamp="1588593594318">
        <mark key="[" line="3" column="17" />
        <mark key="]" line="3" column="22" />
        <mark key="." line="3" column="21" />
        <mark key="^" line="3" column="22" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-graph/account-graph.component.scss" timestamp="1588357562861">
        <mark key="[" line="17" column="0" />
        <mark key="]" line="17" column="57" />
        <mark key="^" line="13" column="12" />
        <mark key="." line="17" column="33" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.scss" timestamp="1588357527961">
        <mark key="[" line="66" column="0" />
        <mark key="]" line="66" column="60" />
        <mark key="^" line="39" column="60" />
        <mark key="." line="74" column="0" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/spend-graph.module.ts" timestamp="1588357909028">
        <mark key="[" line="17" column="13" />
        <mark key="]" line="17" column="37" />
      </file>
      <file name="$USER_HOME$/Desktop/ui-stackblitz-starter/package.json" timestamp="1588593088830">
        <mark key="[" line="31" column="21" />
        <mark key="]" line="31" column="24" />
        <mark key="." line="31" column="23" />
        <mark key="^" line="31" column="24" />
      </file>
      <file name="$USER_HOME$/code/Terminus/terminus-ui/projects/library/csv-entry/src/csv-entry.component.ts" timestamp="1588595529344">
        <mark key="'" line="0" column="0" />
        <mark key="[" line="0" column="0" />
        <mark key="]" line="867" column="1" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.ts" timestamp="1588358662025">
        <mark key="'" line="253" column="32" />
        <mark key="[" line="301" column="14" />
        <mark key="]" line="301" column="27" />
        <mark key="." line="301" column="26" />
        <mark key="^" line="301" column="27" />
      </file>
      <file name="$USER_HOME$/Desktop/ui-stackblitz-starter/src/app/app.component.html" timestamp="1588594258763">
        <mark key="[" line="2" column="24" />
        <mark key="]" line="2" column="25" />
        <mark key="." line="2" column="25" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" timestamp="1588358118178">
        <mark key="'" line="276" column="16" />
        <mark key="[" line="42" column="0" />
        <mark key="]" line="42" column="0" />
        <mark key="^" line="42" column="0" />
        <mark key="." line="42" column="0" />
      </file>
      <file name="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/status-badge/status-badge.component.scss" timestamp="1588357518216">
        <mark key="'" line="19" column="29" />
        <mark key="[" line="13" column="0" />
        <mark key="]" line="13" column="0" />
        <mark key="." line="13" column="0" />
      </file>
    </filemarks>
    <jumps>
      <jump line="346" column="34" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.spec.ts" />
      <jump line="395" column="36" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.spec.ts" />
      <jump line="23" column="48" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/retargeting.module.ts" />
      <jump line="0" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/tactic-details/account-performance/components/accounts-table/accounts-table.component.html" />
      <jump line="3" column="5" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/tactic-details/account-performance/containers/account-performance.container.component.html" />
      <jump line="77" column="26" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/retargeting.module.ts" />
      <jump line="82" column="4" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/retargeting.module.ts" />
      <jump line="14" column="60" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/retargeting.module.ts" />
      <jump line="38" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/retargeting.module.ts" />
      <jump line="13" column="43" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-graph/account-graph.component.ts" />
      <jump line="168" column="5" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" />
      <jump line="264" column="38" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" />
      <jump line="57" column="17" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" />
      <jump line="174" column="26" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.html" />
      <jump line="61" column="20" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.html" />
      <jump line="59" column="11" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.scss" />
      <jump line="61" column="28" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="162" column="11" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="17" column="20" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-graph/account-graph.component.ts" />
      <jump line="250" column="2" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" />
      <jump line="0" column="16" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/account-graph-data.mock.ts" />
      <jump line="872" column="7" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/account-graph-data.mock.ts" />
      <jump line="1244" column="3" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/account-graph-data.mock.ts" />
      <jump line="9" column="11" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/mock-data/table-data.mock.ts" />
      <jump line="1304" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/mock-data/table-data.mock.ts" />
      <jump line="1248" column="1" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/mock-data/account-graph-data.mock.ts" />
      <jump line="1245" column="1" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/mock-data/account-graph-data.mock.ts" />
      <jump line="1220" column="13" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/mock-data/account-graph-data.mock.ts" />
      <jump line="2" column="42" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/mock-data/account-graph-data.mock.ts" />
      <jump line="3" column="2" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/mock-data/account-graph-data.mock.ts" />
      <jump line="1243" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/mock-data/account-graph-data.mock.ts" />
      <jump line="48" column="9" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" />
      <jump line="15" column="25" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="142" column="15" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="143" column="15" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="144" column="15" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="145" column="15" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="140" column="38" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="141" column="15" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="184" column="23" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.html" />
      <jump line="80" column="9" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="190" column="27" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="164" column="11" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="63" column="28" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="83" column="17" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="71" column="21" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="203" column="20" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="124" column="58" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="180" column="89" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="30" column="29" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="31" column="23" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="96" column="52" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="152" column="56" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="154" column="54" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="165" column="28" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="28" column="23" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="166" column="57" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="0" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="148" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="208" column="3" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" />
      <jump line="267" column="32" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" />
      <jump line="14" column="13" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="273" column="16" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/containers/retargeting.container.component.ts" />
      <jump line="192" column="16" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="204" column="30" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="2" column="24" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.html" />
      <jump line="84" column="9" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="66" column="28" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="95" column="23" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="58" column="16" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="87" column="9" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="94" column="9" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="328" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.ts" />
      <jump line="253" column="32" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.ts" />
      <jump line="19" column="2" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-graph/account-graph.component.ts" />
      <jump line="30" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-graph/account-graph.component.ts" />
      <jump line="175" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="214" column="4" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="48" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="50" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="79" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="82" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="85" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="90" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="208" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/components/spend-graph/graph/graph.component.ts" />
      <jump line="0" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/heads-up/heads-up.component.scss" />
      <jump line="8" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/inline-bullet-spacer/inline-bullet-spacer.component.scss" />
      <jump line="19" column="29" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/status-badge/status-badge.component.scss" />
      <jump line="54" column="0" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.scss" />
      <jump line="204" column="8" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.spec.ts" />
      <jump line="219" column="38" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.spec.ts" />
      <jump line="209" column="8" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.spec.ts" />
      <jump line="205" column="32" filename="$USER_HOME$/code/Terminus/engage-gui/src/app/features/retargeting/components/account-table/account-table.component.spec.ts" />
      <jump line="36" column="21" filename="$USER_HOME$/code/Terminus/terminus-ui/projects/demo/src/app/components/csv-entry/csv-entry.component.ts" />
      <jump line="123" column="13" filename="$USER_HOME$/code/Terminus/terminus-ui/projects/library/csv-entry/src/csv-entry.component.ts" />
      <jump line="33" column="26" filename="$USER_HOME$/code/Terminus/terminus-ui/projects/demo/src/app/components/csv-entry/csv-entry.component.ts" />
      <jump line="8" column="27" filename="$USER_HOME$/code/Terminus/terminus-ui/projects/demo/src/app/components/csv-entry/csv-entry.component.ts" />
      <jump line="2" column="7" filename="$USER_HOME$/code/Terminus/terminus-ui/projects/library/csv-entry/src/csv-entry.component.ts" />
      <jump line="692" column="26" filename="$USER_HOME$/code/Terminus/terminus-ui/projects/library/csv-entry/src/csv-entry.component.ts" />
      <jump line="0" column="0" filename="$USER_HOME$/code/Terminus/terminus-ui/projects/library/csv-entry/src/csv-entry.component.ts" />
    </jumps>
  </component>
  <component name="VimRegisterSettings">
    <registers>
      <register name="&quot;" type="4">
        <text encoding="base64">IyEvYmluL2Jhc2gKCiMKIyBhKSBQcm9tb3RlIHRoZSBsYXRlc3QgQG5leHQgTlBNIHRhZyB0byBAbGF0ZXN0CiMgYikgSW5zdGFsbCBuZXcgZGVwZW5kZW5jaWVzCiMgYykgRGVwbG95IHVwZGF0ZWQgZGVtb3MKIwoKLiB+Ly5iYXNocmMKCiMgTk9URTogUmVxdWlyaW5nIGEgc3BhY2UgYmVmb3JlICduZXh0JyBlbnN1cmVzIHdlIGRvbid0IG1hdGNoIHRoZSAnbmV4dCcgdmVyc2lvbiBvZiBhbm90aGVyIGJyYW5jaCAoZWcgdjEwLW5leHQpCk5FWFRfVkVSU0lPTl9TVFJJTkc9IiQoeWFybiB0YWcgbGlzdCBAdGVybWludXMvdWkgfCBncmVwIC1pICIgbmV4dCIpfSIKCiMgU3RyaXAgZXZlcnl0aGluZyBleGNlcHQgdGhlIGFjdHVhbCB2ZXJzaW9uIG51bWJlcnMKVkVSU0lPTl9OVU1CRVI9IiQoZWNobyAiJE5FWFRfVkVSU0lPTl9TVFJJTkciIHwgZWdyZXAgLW8gJyBbWzpkaWdpdDpdXStcLltbOmRpZ2l0Ol1dK1wuW1s6ZGlnaXQ6XV0rJyB8IHRyIC1kICdbOnNwYWNlOl0nKSIKCmVjaG8gIlByb21vdGluZyB2ZXJzaW9uOiAkVkVSU0lPTl9OVU1CRVIiCgoKbnBtIGRpc3QtdGFnIGFkZCBAdGVybWludXMvdWlAIiRWRVJTSU9OX05VTUJFUiIgbGF0ZXN0IHx8IHsKICAgIGVjaG8g</text>
      </register>
      <register name="*" type="2">
        <text encoding="base64">Ly8gTk9URTogTW92aW5nIGl0ZW1zIGxpa2UgYGdldEhlYWRlckNlbGxOYW1lYCBpbnRvIHRoZSB0ZW1wbGF0ZSB3b3VsZCBhZGQgdG9vIG11Y2ggbG9naWMgdG8gdGhlIHRlbXBsYXRlCi8vIE5PVEU6IFVzaW5nIHRyYWNrQnkgb24gZm9ybSBncm91cHMgYWN0dWFsbHkgY2hhbmdlcyB0aGUgb3V0cHV0IHNpbmNlIHRoZXJlIGlzIG5vIHN0YXRpYyBJRCB0byByZWZlcmVuY2UKaW1wb3J0IHsKICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwKICBDaGFuZ2VEZXRlY3RvclJlZiwKICBDb21wb25lbnQsCiAgRXZlbnRFbWl0dGVyLAogIElucHV0LAogIE9uRGVzdHJveSwKICBPbkluaXQsCiAgT3V0cHV0LAogIFZpZXdFbmNhcHN1bGF0aW9uLAp9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgewogIEZvcm1BcnJheSwKICBGb3JtQnVpbGRlciwKICBGb3JtQ29udHJvbCwKICBGb3JtR3JvdXAsCiAgVmFsaWRhdG9yRm4sCn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnOwppbXBvcnQgeyBUc0RvY3VtZW50U2VydmljZSB9IGZyb20gJ0B0ZXJtaW51cy9uZ3gtdG9vbHMvYnJvd3Nlcic7CmltcG9ydCB7CiAgY29lcmNlQm9vbGVhblByb3BlcnR5LAogIGNvZXJjZU51bWJlclByb3BlcnR5LAp9IGZyb20gJ0B0ZXJtaW51cy9uZ3gtdG9vbHMvY29lcmNpb24nOwppbXBvcnQgeyB1bnRpbENvbXBvbmVudERlc3Ryb3llZCB9IGZyb20gJ0B0ZXJtaW51cy9uZ3gtdG9vbHMvdXRpbGl0aWVzJzsKaW1wb3J0IHsgVFNfU1BBQ0lORyB9IGZyb20gJ0B0ZXJtaW51cy91aS9zcGFjaW5nJzsKaW1wb3J0IHsgc3RyaXBDb250cm9sQ2hhcmFjdGVycyB9IGZyb20gJ0B0ZXJtaW51cy91aS91dGlsaXRpZXMnOwppbXBvcnQgeyBkZWJvdW5jZVRpbWUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7CgoKLyoqCiAqIFRoZSBzdHJ1Y3R1cmUgZm9yIGFuIGluZGl2aWR1YWwgcm93CiAqLwpleHBvcnQgaW50ZXJmYWNlIFRzQ1NWRW50cnlSZWNvcmQgewogIHJlY29yZElkOiBudW1iZXI7CiAgY29sdW1uczogKHN0cmluZyB8IG51bGwpW107Cn0KCi8qKgogKiBUaGUgc3RydWN0dXJlIGZvciB0aGUgZm9ybQogKi8KZXhwb3J0IGludGVyZmFjZSBUc0NTVkZvcm1Db250ZW50cyB7CiAgaGVhZGVyczogc3RyaW5nW107CiAgcmVjb3JkczogVHNDU1ZFbnRyeVJlY29yZFtdOwp9CgovKioKICogVGhlIHN0cnVjdHVyZSBmb3IgYSByZXF1aXJlZCBlcnJvcgogKi8KZXhwb3J0IGludGVyZmFjZSBUc0NTVlJlcXVpcmVkRXJyb3IgewogIHJvd0lkOiBudW1iZXI7CiAgdmFsaWQ6IGJvb2xlYW47Cn0KCi8qKgogKiBUaGUgc3RydWN0dXJlIGZvciBhIFVSTCBlcnJvcgogKi8KZXhwb3J0IGludGVyZmFjZSBUc0NTVlVybEVycm9yIHsKICBhY3R1YWw6IHN0cmluZzsKICByb3dJZDogbnVtYmVyOwogIHZhbGlkOiBib29sZWFuOwp9CgovKioKICogVGhlIHN0cnVjdHVyZSBmb3IgdGhlIGVycm9yIHNldAogKi8KZXhwb3J0IGludGVyZmFjZSBUc0NTVkZvcm1FcnJvciB7CiAgLy8gVGhlIGNvbnRyb2wgbmFtZQogIGNvbnRyb2w6IHN0cmluZzsKICByZXF1aXJlZD86IFRzQ1NWUmVxdWlyZWRFcnJvcjsKICB1cmw/OiBUc0NTVlVybEVycm9yOwp9CgovKioKICogVGhlIHN0cnVjdHVyZSBmb3IgYSByb3cKICovCmV4cG9ydCBpbnRlcmZhY2UgVHNDU1ZSb3cgewogIHJlY29yZElkOiBGb3JtQ29udHJvbDsKICBjb2x1bW5zOiBGb3JtQXJyYXk7Cn0KCgovKioKICogVW5pcXVlIElEIGZvciBlYWNoIGluc3RhbmNlCiAqLwpsZXQgbmV4dFVuaXF1ZUlkID0gMDsKY29uc3QgREVGQVVMVF9ST1dfQ09VTlQgPSA0Owpjb25zdCBERUZBVUxUX0NPTFVNTl9DT1VOVCA9IDI7CmNvbnN0IERFRkFVTFRfTUFYX1JPV1MgPSAyMDAwOwpjb25zdCBERUZBVUxUX1ZBTElEQVRJT05fTUVTU0FHRVNfTUFYID0gNjsKCgovKioKICogVGhpcyBpcyB0aGUgY3N2LWVudHJ5IFVJIENvbXBvbmVudAogKgogKiBAZXhhbXBsZQogKiA8dHMtY3N2LWVudHJ5CiAqICAgICAgICAgICAgICBjb2x1bW5Db3VudD0iNiIKICogICAgICAgICAgICAgIFtjb2x1bW5IZWFkZXJzXT0iYXJyYXlPZkhlYWRlcnMiCiAqICAgICAgICAgICAgICBbY29sdW1uVmFsaWRhdG9yc109ImFycmF5T2ZWYWxpZGF0b3JzIgogKiAgICAgICAgICAgICAgW2Zvb3RlckRpcmVjdGlvbl09Imx0ciIKICogICAgICAgICAgICAgIFtmdWxsV2lkdGhdPSJmYWxzZSIKICogICAgICAgICAgICAgIGlkPSJteS1pZCIKICogICAgICAgICAgICAgIG1heFJvd3M9IjEwMDAiCiAqICAgICAgICAgICAgICByb3dDb3VudD0iMTIiCiAqICAgICAgICAgICAgICBvdXRwdXRGb3JtYXQ9ImNzdiIKICogICAgICAgICAgICAgIChibG9iR2VuZXJhdGVkKT0iaGFuZGxlVGhlRmlsZUJsb2IoJGV2ZW50KSIKICogPjwvdHMtY3N2LWVudHJ5PgogKgogKiA8ZXhhbXBsZS11cmw+aHR0cHM6Ly9nZXR0ZXJtaW51cy5naXRodWIuaW8vdWktZGVtb3MtcmVsZWFzZS9jb21wb25lbnRzL2Nzdi1lbnRyeTwvZXhhbXBsZS11cmw+CiAqLwpAQ29tcG9uZW50KHsKICBzZWxlY3RvcjogJ3RzLWNzdi1lbnRyeScsCiAgdGVtcGxhdGVVcmw6ICcuL2Nzdi1lbnRyeS5jb21wb25lbnQuaHRtbCcsCiAgc3R5bGVVcmxzOiBbJy4vY3N2LWVudHJ5LmNvbXBvbmVudC5zY3NzJ10sCiAgaG9zdDogewogICAgJ2NsYXNzJzogJ3RzLWNzdi1lbnRyeScsCiAgICAnW2NsYXNzLmMtY3N2LWVudHJ5LS1mdWxsLXdpZHRoXSc6ICdmdWxsV2lkdGgnLAogICAgJ1thdHRyLmlkXSc6ICdpZCcsCiAgfSwKICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCwKICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLAogIGV4cG9ydEFzOiAndHNDU1ZFbnRyeScsCn0pCmV4cG9ydCBjbGFzcyBUc0NTVkVudHJ5Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kgewogIHByaXZhdGUgb3JpZ2luYWxDb2x1bW5Db3VudCA9IERFRkFVTFRfQ09MVU1OX0NPVU5UOwogIC8qKgogICAqIERlZmluZSB0aGUgZGVmYXVsdCBjb21wb25lbnQgSUQKICAgKi8KICBwcm90ZWN0ZWQgdWlkID0gYHRzLWNzdi1lbnRyeS0ke25leHRVbmlxdWVJZCsrfWA7CgogIC8qKgogICAqIERlZmluZSB0aGUgc3RhdGljIGhlaWdodCBuZWVkZWQgaW4gdGhlIERPTSBmb3IgdGhlIGV4dGVybmFsIHJvd3MKICAgKi8KICBwdWJsaWMgZmFrZVJvd0hlaWdodCA9ICczNXB4JzsKCiAgLyoqCiAgICogRXhwb3NlIHRoZSBmbGV4Ym94IGxheW91dCBnYXAKICAgKi8KICBwdWJsaWMgbGF5b3V0R2FwOiBzdHJpbmcgPSBUU19TUEFDSU5HLnNtYWxsWzBdOwoKICAvKioKICAgKiBFeHBvc2UgYSB2YWxpZGF0aW9uIG1lc3NhZ2UgaWYgdG9vIG1hbnkgcm93cyBhcmUgYWRkZWQKICAgKi8KICBwdWJsaWMgdG9vTWFueVJvd3NNZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbDsKCiAgLyoqCiAgICogU3RvcmUgcmVjb3JkcyAocm93cykKICAgKi8KICBwdWJsaWMgcmVjb3JkczogVHNDU1ZFbnRyeVJlY29yZFtdID0gW107CgogIC8qKgogICAqIEluaXRpYWxpemUgdGhlIHJlY29yZHMgZm9ybSB3aXRoIGFuIGVtcHR5IGFycmF5CiAgICovCiAgcHVibGljIHJlY29yZHNGb3JtOiBGb3JtR3JvdXAgPSB0aGlzLmZvcm1CdWlsZGVyLmdyb3VwKHsKICAgIGhlYWRlcnM6IHRoaXMuZm9ybUJ1aWxkZXIuYXJyYXkoW10pLAogICAgcmVjb3JkczogdGhpcy5mb3JtQnVpbGRlci5hcnJheShbXSksCiAgfSk7CgogIC8qKgogICAqIFN0b3JlIGEgcmVmZXJlbmNlIHRvIGFsbCBleGlzdGluZyBlcnJvcnMKICAgKi8KICBwdWJsaWMgYWxsRXJyb3JzOiBUc0NTVkZvcm1FcnJvcltdIHwgbnVsbCA9IG51bGw7CgogIC8qKgogICAqIEdldCBoZWFkZXIgY2VsbHMgYXMgYSBmb3JtIGFycmF5CiAgICovCiAgcHVibGljIGdldCBoZWFkZXJDZWxscygpOiBGb3JtQXJyYXkgewogICAgcmV0dXJuIHRoaXMucmVjb3Jkc0Zvcm0uZ2V0KCdoZWFkZXJzJykgYXMgRm9ybUFycmF5OwogIH0KCiAgLyoqCiAgICogR2V0IHJvd3MgYXMgYSBmb3JtIGFycmF5CiAgICovCiAgcHVibGljIGdldCByb3dzKCk6IEZvcm1BcnJheSB7CiAgICByZXR1cm4gdGhpcy5yZWNvcmRzRm9ybS5nZXQoJ3JlY29yZHMnKSBhcyBGb3JtQXJyYXk7CiAgfQoKICAvKioKICAgKiBTZXQgdGhlIG51bWJlciBvZiBjb2x1bW5zCiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBzZXQgY29sdW1uQ291bnQodmFsdWU6IG51bWJlcikgewogICAgdGhpcy5fY29sdW1uQ291bnQgPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSwgREVGQVVMVF9DT0xVTU5fQ09VTlQpOwogIH0KICBwdWJsaWMgZ2V0IGNvbHVtbkNvdW50KCk6IG51bWJlciB7CiAgICByZXR1cm4gdGhpcy5fY29sdW1uQ291bnQ7CiAgfQogIHByaXZhdGUgX2NvbHVtbkNvdW50OiBudW1iZXIgPSBERUZBVUxUX0NPTFVNTl9DT1VOVDsKCiAgLyoqCiAgICogQWxsb3cgc3RhdGljIGhlYWRlcnMgdG8gYmUgc2V0CiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBzZXQgY29sdW1uSGVhZGVycyh2YWx1ZTogc3RyaW5nW10gfCB1bmRlZmluZWQpIHsKICAgIHRoaXMuX2NvbHVtbkhlYWRlcnMgPSB2YWx1ZTsKICAgIHRoaXMuY2xlYXJIZWFkZXJDZWxscygpOwogICAgdGhpcy5hZGRIZWFkZXJzKHRoaXMuY29sdW1uQ291bnQsIHRoaXMuY29sdW1uSGVhZGVycyk7CiAgfQogIHB1YmxpYyBnZXQgY29sdW1uSGVhZGVycygpOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCB7CiAgICByZXR1cm4gdGhpcy5fY29sdW1uSGVhZGVyczsKICB9CiAgcHJpdmF0ZSBfY29sdW1uSGVhZGVyczogc3RyaW5nW10gfCB1bmRlZmluZWQ7CgogIC8qKgogICAqIERlZmluZSBhbnkgY29sdW1uIHZhbGlkYXRvcnMKICAgKgogICAqIEBwYXJhbSB2YWx1ZQogICAqLwogIEBJbnB1dCgpCiAgcHVibGljIHNldCBjb2x1bW5WYWxpZGF0b3JzKHZhbHVlOiBWYWxpZGF0b3JGbiB8IG51bGxbXSkgewogICAgaWYgKCF2YWx1ZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5fY29sdW1uVmFsaWRhdG9ycyA9IHZhbHVlOwogIH0KICBwdWJsaWMgZ2V0IGNvbHVtblZhbGlkYXRvcnMoKTogVmFsaWRhdG9yRm4gfCBudWxsW10gewogICAgcmV0dXJuIHRoaXMuX2NvbHVtblZhbGlkYXRvcnM7CiAgfQogIHByaXZhdGUgX2NvbHVtblZhbGlkYXRvcnM6IFZhbGlkYXRvckZuIHwgbnVsbFtdID0gW107CgogIC8qKgogICAqIERlZmluZSB0aGUgbGF5b3V0IGRpcmVjdGlvbiBmb3IgdGhlIGZvb3RlcgogICAqLwogIEBJbnB1dCgpCiAgcHVibGljIGZvb3RlckRpcmVjdGlvbjogJ2x0cicgfCAncnRsJyA9ICdsdHInOwoKICAvKioKICAgKiBBbGxvdyBmdWxsLXdpZHRoIG1vZGUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBmdWxsV2lkdGggPSBmYWxzZTsKCiAgLyoqCiAgICogRGVmaW5lIGFuIElEIGZvciB0aGUgY29tcG9uZW50CiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBzZXQgaWQodmFsdWU6IHN0cmluZykgewogICAgdGhpcy5faWQgPSB2YWx1ZSB8fCB0aGlzLnVpZDsKICB9CiAgcHVibGljIGdldCBpZCgpOiBzdHJpbmcgewogICAgcmV0dXJuIHRoaXMuX2lkOwogIH0KICBwcm90ZWN0ZWQgX2lkOiBzdHJpbmcgPSB0aGlzLnVpZDsKCiAgLyoqCiAgICogU2V0IHRoZSBtYXhpbXVtIG51bWJlciBvZiBhbGxvd2VkIHJvd3MKICAgKgogICAqIEBwYXJhbSB2YWx1ZQogICAqLwogIEBJbnB1dCgpCiAgcHVibGljIHNldCBtYXhSb3dzKHZhbHVlOiBudW1iZXIpIHsKICAgIHRoaXMuX21heFJvd3MgPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSwgREVGQVVMVF9NQVhfUk9XUyk7CiAgfQogIHB1YmxpYyBnZXQgbWF4Um93cygpOiBudW1iZXIgewogICAgcmV0dXJuIHRoaXMuX21heFJvd3M7CiAgfQogIHByaXZhdGUgX21heFJvd3M6IG51bWJlciA9IERFRkFVTFRfTUFYX1JPV1M7CgogIC8qKgogICAqIERlZmluZSBvdXRwdXQgdG8gYmUgQ1NWIHJhdGhlciB0aGFuIFRTVgogICAqLwogIEBJbnB1dCgpCiAgcHVibGljIG91dHB1dEZvcm1hdDogJ2NzdicgfCAndHN2JyA9ICd0c3YnOwoKICAvKioKICAgKiBEZWZpbmUgdGhlIG51bWJlciBvZiByb3dzCiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBzZXQgcm93Q291bnQodmFsdWU6IG51bWJlcikgewogICAgdGhpcy5fcm93Q291bnQgPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSwgREVGQVVMVF9ST1dfQ09VTlQpOwogIH0KICBwdWJsaWMgZ2V0IHJvd0NvdW50KCk6IG51bWJlciB7CiAgICByZXR1cm4gdGhpcy5fcm93Q291bnQ7CiAgfQogIHByaXZhdGUgX3Jvd0NvdW50OiBudW1iZXIgPSBERUZBVUxUX1JPV19DT1VOVDsKCiAgLyoqCiAgICogRW1pdCB0aGUgYnVpbHQgZmlsZSBibG9iCiAgICovCiAgQE91dHB1dCgpCiAgcHVibGljIHJlYWRvbmx5IGJsb2JHZW5lcmF0ZWQ6IEV2ZW50RW1pdHRlcjxCbG9iPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTsKCgogIGNvbnN0cnVjdG9yKAogICAgcHJpdmF0ZSBmb3JtQnVpbGRlcjogRm9ybUJ1aWxkZXIsCiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZiwKICAgIHByaXZhdGUgZG9jdW1lbnRTZXJ2aWNlOiBUc0RvY3VtZW50U2VydmljZSwKICApIHt9CgoKICAvKioKICAgKiBBZGQgY29sdW1ucyB0byBleGlzdGluZyByb3dzICsgaGVhZGVyCiAgICoKICAgKiBAcGFyYW0gcm93cyAtIFRoZSBleGlzdGluZyBib2R5IHJvd3MKICAgKiBAcGFyYW0gaGVhZGVyQ2VsbHMgLSBUaGUgYXJyYXkgb2YgaGVhZGVyIGNlbGxzCiAgICogQHBhcmFtIGNvbHVtbnNUb0FkZCAtIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBhZGQKICAgKi8KICBwcml2YXRlIHN0YXRpYyBhZGRDb2x1bW5zVG9Sb3dzKHJvd3M6IEZvcm1BcnJheSwgaGVhZGVyQ2VsbHM6IEZvcm1BcnJheSwgY29sdW1uc1RvQWRkOiBudW1iZXIpOiB2b2lkIHsKICAgIC8vIEFkZCBjb2x1bW5zIHRvIGJvZHkgcm93cwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGNvbnN0IHJvdzogRm9ybUdyb3VwID0gcm93cy5jb250cm9sc1tpXSBhcyBGb3JtR3JvdXA7CiAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICAgIGlmIChyb3cpIHsKICAgICAgICBjb25zdCBjb2x1bW5zID0gcm93LmNvbnRyb2xzLmNvbHVtbnMgYXMgRm9ybUFycmF5OwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbHVtbnNUb0FkZDsgaiArPSAxKSB7CiAgICAgICAgICBjb2x1bW5zLmNvbnRyb2xzLnB1c2gobmV3IEZvcm1Db250cm9sKCkpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIEFkZCBjb2x1bW5zIHRvIGhlYWRlcgogICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2x1bW5zVG9BZGQ7IGsgKz0gMSkgewogICAgICBoZWFkZXJDZWxscy5jb250cm9scy5wdXNoKG5ldyBGb3JtQ29udHJvbCgpKTsKICAgIH0KICB9CgogIC8qKgogICAqIFNwbGl0IHBhc3RlZCBkYXRhIGludG8gaGVhZGVycywgcm93cywgYW5kIGNvbHVtbnMKICAgKgogICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGV2ZW50IGNvbnRlbnQKICAgKiBAcGFyYW0gaGFzSGVhZGVycyAtIFdoZXRoZXIgdGhlIGNvbnRlbnQgaGFzIGEgaGVhZGVyIHJvdwogICAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIGFsbCBkYXRhCiAgICovCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICBwcml2YXRlIHN0YXRpYyBzcGxpdENvbnRlbnQoY29udGVudDogc3RyaW5nLCBoYXNIZWFkZXJzOiBib29sZWFuKTogUmVjb3JkPHN0cmluZywgYW55PiB7CiAgICBjb25zdCByZXN1bHQ6IHtoZWFkZXJzOiB1bmRlZmluZWR8c3RyaW5nW107IHJvd3M6IHVuZGVmaW5lZHxzdHJpbmdbXXxzdHJpbmdbXVtdfSA9IHsKICAgICAgaGVhZGVyczogdW5kZWZpbmVkLAogICAgICByb3dzOiB1bmRlZmluZWQsCiAgICB9OwogICAgY29uc3Qgcm93cyA9IGNvbnRlbnQuc3BsaXQoJ1xuJyk7CgogICAgaWYgKGhhc0hlYWRlcnMpIHsKICAgICAgcmVzdWx0LmhlYWRlcnMgPSByb3dzWzBdLnNwbGl0KCdcdCcpOwogICAgICByZXN1bHQucm93cyA9IHJvd3Muc2xpY2UoMSwgcm93cy5sZW5ndGgpLm1hcChyID0+IHIuc3BsaXQoJ1x0JykpOwogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0LnJvd3MgPSByb3dzLnNsaWNlKDAsIHJvd3MubGVuZ3RoKS5tYXAociA9PiByLnNwbGl0KCdcdCcpKTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgLyoqCiAgICogSW5pdGlhbGl6ZSBlbXB0eSByb3dzCiAgICovCiAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQgewogICAgdGhpcy5hZGRSb3dzKHRoaXMucm93Q291bnQsIHRoaXMuY29sdW1uQ291bnQpOwogICAgdGhpcy5hZGRIZWFkZXJzKHRoaXMuY29sdW1uQ291bnQsIHRoaXMuY29sdW1uSGVhZGVycyk7CiAgICB0aGlzLm9yaWdpbmFsQ29sdW1uQ291bnQgPSB0aGlzLmNvbHVtbkNvdW50OwoKICAgIHRoaXMucmVjb3Jkc0Zvcm0udmFsdWVDaGFuZ2VzLnBpcGUoCiAgICAgIC8vIExldCB0aGUgZm9ybSB2YWx1ZXMgJ3NldHRsZScgYmVmb3JlIHdlIGVtaXQgYW55dGhpbmcKICAgICAgZGVib3VuY2VUaW1lKDEpLAogICAgICB1bnRpbENvbXBvbmVudERlc3Ryb3llZCh0aGlzKSwKICAgICkuc3Vic2NyaWJlKHYgPT4gewogICAgICBjb25zdCBibG9iID0gdGhpcy5nZW5lcmF0ZUJsb2Iodik7CiAgICAgIHRoaXMuYmxvYkdlbmVyYXRlZC5lbWl0KGJsb2IpOwogICAgfSk7CiAgfQoKICAvKioKICAgKiBOZWVkZWQgZm9yIGB1bnRpbENvbXBvbmVudERlc3Ryb3llZGAKICAgKi8KICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7fQoKICAvKioKICAgKiBBZGQgcm93cyB0byB0aGUgZm9ybQogICAqCiAgICogQHBhcmFtIHJvd0NvdW50IC0gVGhlIG51bWJlciBvZiByb3dzIHRvIGFkZAogICAqIEBwYXJhbSBjb2x1bW5Db3VudCAtIFRoZSBudW1iZXIgb2YgY29sdW1ucyBlYWNoIHJvdyBzaG91bGQgaGF2ZQogICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbHVtbiBjb250ZW50CiAgICogQHBhcmFtIGluZGV4IC0gVGhlIHJvdyBpbmRleAogICAqLwogIHB1YmxpYyBhZGRSb3dzKHJvd0NvdW50ID0gMSwgY29sdW1uQ291bnQ6IG51bWJlciA9IHRoaXMuY29sdW1uQ291bnQsIGNvbnRlbnQ/OiBzdHJpbmdbXVtdLCBpbmRleD86IG51bWJlcik6IHZvaWQgewogICAgaWYgKCh0aGlzLnJvd3MubGVuZ3RoICsgcm93Q291bnQpID4gdGhpcy5tYXhSb3dzKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbWFnaWMtbnVtYmVycwogICAgICBjb25zdCByb3dzVGhhdERvbnRGaXQgPSAocm93Q291bnQgPT09IDEgPyAyIDogcm93Q291bnQpIC0gKCh0aGlzLnJvd3MubGVuZ3RoICsgcm93Q291bnQpIC0gdGhpcy5tYXhSb3dzKTsKICAgICAgdGhpcy50b29NYW55Um93c01lc3NhZ2UgPQogICAgICAgIGBBZGRpbmcgJHtyb3dzVGhhdERvbnRGaXR9IHJvdyR7cm93c1RoYXREb250Rml0ID4gMSA/ICdzJyA6ICcnfSB3b3VsZCBleGNlZWQgdGhlIG1heGltdW0gcm93cyBhbGxvd2VkICgke3RoaXMubWF4Um93c30pLmA7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAodGhpcy50b29NYW55Um93c01lc3NhZ2UpIHsKICAgICAgdGhpcy50b29NYW55Um93c01lc3NhZ2UgPSBudWxsOwogICAgfQoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93Q291bnQ7IGkgKz0gMSkgewogICAgICBjb25zdCBpbmRleFRvSW5qZWN0QXQ6IG51bWJlciA9IChpbmRleCA9PT0gdW5kZWZpbmVkID8gdGhpcy5yb3dDb3VudCA6IGluZGV4KSArIGk7CiAgICAgIGNvbnN0IGM6IHN0cmluZ1tdIHwgbnVsbCA9IGNvbnRlbnQgPyBjb250ZW50W2ldIDogbnVsbDsKICAgICAgY29uc3QgY3JlYXRlZFJvdzogRm9ybUdyb3VwID0gdGhpcy5jcmVhdGVSb3codGhpcy5yb3dzLmxlbmd0aCwgYyk7CgogICAgICBpZiAoKGluZGV4ICE9PSB1bmRlZmluZWQpICYmIChpbmRleCA+PSAwKSkgewogICAgICAgIHRoaXMucm93cy5pbnNlcnQoaW5kZXhUb0luamVjdEF0LCBjcmVhdGVkUm93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJvd3MucHVzaChjcmVhdGVkUm93KTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBjb2x1bW5zIG9mIGEgcm93CiAgICoKICAgKiBAcGFyYW0gcm93IC0gVGhlIHJvdwogICAqIEByZXR1cm5zIFRoZSBhcnJheSBvZiBjb2x1bW5zCiAgICovCiAgcHVibGljIGdldENvbHVtbnMocm93OiBGb3JtR3JvdXApOiBGb3JtQXJyYXkgewogICAgcmV0dXJuIHJvdy5nZXQoJ2NvbHVtbnMnKSBhcyBGb3JtQXJyYXk7CiAgfQoKICAvKioKICAgKiBVcGRhdGUgdGhlIGZvcm0gY29udHJvbCBmb3IgcmVjb3JkSWQgb24gZWFjaCByb3cgYWNjb3JkaW5nIHRvIGluZGV4LgogICAqLwogIHB1YmxpYyB1cGRhdGVBbGxSb3dJZHMoKTogdm9pZCB7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm93cy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCByb3c6IEZvcm1Hcm91cCA9IHRoaXMucm93cy5jb250cm9sc1tpXSBhcyBGb3JtR3JvdXA7CiAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICAgIGlmIChyb3cpIHsKICAgICAgICByb3cuY29udHJvbHMucmVjb3JkSWQuc2V0VmFsdWUoaSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIEhhbmRsZSBwYXN0ZSBldmVudCBmb3Igc3RhbmRhcmQgY29udGVudCBjZWxsCiAgICoKICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgcGFzdGUgZXZlbnQKICAgKiBAcGFyYW0gaGFzSGVhZGVyIC0gV2hldGhlciB0aGUgY29udGVudCBoYXMgYSBoZWFkZXIgcm93CiAgICovCiAgcHVibGljIG9uUGFzdGUoZXZlbnQ6IENsaXBib2FyZEV2ZW50LCBoYXNIZWFkZXI/OiBib29sZWFuKTogdm9pZCB7CiAgICBjb25zdCBldmVudENvbnRlbnQgPSBldmVudC5jbGlwYm9hcmREYXRhPy5nZXREYXRhKCdUZXh0Jyk7CiAgICBpZiAoIWV2ZW50Q29udGVudCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gSWYgdGhlIHVzZXIgaXMgb25seSBwYXN0aW5nIHRoZSBjb250ZW50IGZvciBhIHNpbmdsZSBjZWxsIC0gZG8gbm90aGluZwogICAgY29uc3QgaXNTaW5nbGVDZWxsID0gKGV2ZW50Q29udGVudC5pbmRleE9mKCdcbicpIDwgMCkgJiYgKGV2ZW50Q29udGVudC5pbmRleE9mKCdcdCcpIDwgMCk7CiAgICBpZiAoaXNTaW5nbGVDZWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBoYXNIZWFkZXIgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoaGFzSGVhZGVyKTsKICAgIGNvbnN0IHBhc3RlZFJvd0lkOiBudW1iZXIgPSBwYXJzZUludCgoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmlkLnNwbGl0KCdYJylbMF0uc3BsaXQoJ18nKVsyXSwgMTApOwogICAgY29uc3QgY29udGVudCA9IFRzQ1NWRW50cnlDb21wb25lbnQuc3BsaXRDb250ZW50KGV2ZW50Q29udGVudCwgaGFzSGVhZGVyKTsKICAgIGNvbnN0IG5lZWRlZFJvd3M6IG51bWJlciA9IGNvbnRlbnQucm93cy5sZW5ndGg7CgogICAgLy8gSWYgdGhlIHBhc3RlIHdhcyBpbnRvIGEgaGVhZGVyIGNlbGwsIHZlcmlmeSB0aGF0IGhlYWRlciBjZWxsIGNvbnRlbnQgZG9lc24ndCBhbHJlYWR5IGV4aXN0CiAgICBpZiAoaGFzSGVhZGVyKSB7CiAgICAgIHRoaXMuY2xlYXJBbGxSb3dzKCk7CiAgICAgIHRoaXMuY2xlYXJIZWFkZXJDZWxscygpOwogICAgICB0aGlzLmFkZEhlYWRlcnMoY29udGVudC5oZWFkZXJzLmxlbmd0aCwgdGhpcy5jb2x1bW5IZWFkZXJzIHx8IGNvbnRlbnQuaGVhZGVycyk7CiAgICAgIHRoaXMuY29sdW1uQ291bnQgPSBjb250ZW50LmhlYWRlcnMubGVuZ3RoOwogICAgICB0aGlzLmFkZFJvd3MobmVlZGVkUm93cywgY29udGVudC5oZWFkZXJzLmxlbmd0aCwgY29udGVudC5yb3dzKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEVsc2U6IHRoZSBwYXN0ZSBoYXBwZW5lZCBpbiBhIGJvZHkgY2VsbAogICAgICBjb25zdCBwYXN0ZWRDb2x1bW5Db3VudCA9IGNvbnRlbnQucm93c1swXS5sZW5ndGg7CgogICAgICAvLyBJZiBtb3JlIGNvbHVtbnMgd2VyZSBwYXN0ZWQgdGhhbiBjdXJyZW50bHkgZXhpc3QsIGluY3JlYXNlIHRoZSBjb2x1bW4gY291bnQKICAgICAgaWYgKHBhc3RlZENvbHVtbkNvdW50ID4gdGhpcy5jb2x1bW5Db3VudCkgewogICAgICAgIGNvbnN0IG51bWJlck9mTWlzc2luZ0NvbHVtbnMgPSBwYXN0ZWRDb2x1bW5Db3VudCAtIHRoaXMuY29sdW1uQ291bnQ7CiAgICAgICAgVHNDU1ZFbnRyeUNvbXBvbmVudC5hZGRDb2x1bW5zVG9Sb3dzKHRoaXMucm93cywgdGhpcy5oZWFkZXJDZWxscywgbnVtYmVyT2ZNaXNzaW5nQ29sdW1ucyk7CiAgICAgICAgdGhpcy5jb2x1bW5Db3VudCA9IHBhc3RlZENvbHVtbkNvdW50OwogICAgICB9CiAgICAgIHRoaXMuZGVsZXRlUm93KHBhc3RlZFJvd0lkKTsKICAgICAgdGhpcy5hZGRSb3dzKG5lZWRlZFJvd3MsIGNvbnRlbnQucm93cy5sZW5ndGgsIGNvbnRlbnQucm93cywgcGFzdGVkUm93SWQpOwogICAgfQoKICAgIHRoaXMudXBkYXRlQWxsUm93SWRzKCk7CiAgICB0aGlzLnVwZGF0ZUVycm9ycygpOwogICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7CiAgfQoKICAvKioKICAgKiBFeHBvc2UgYWJpbGl0eSB0byB0cmlnZ2VyIGVycm9yIHVwZGF0ZXMgZnJvbSB0aGUgRE9NCiAgICovCiAgcHVibGljIHVwZGF0ZUVycm9ycygpOiB2b2lkIHsKICAgIHRoaXMuYWxsRXJyb3JzID0gdGhpcy5jb2xsZWN0RXJyb3JzKCk7CiAgfQoKICAvKioKICAgKiBIZWxwZXIgdG8gZ2V0IHRoZSBuYW1lIChjb250ZW50KSBvZiBhIGhlYWRlciBjZWxsIGZvciB0aGUgdGl0bGUgYXR0cmlidXRlCiAgICoKICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgY29sdW1uIGluZGV4CiAgICogQHJldHVybnMgVGhlIGhlYWRlciBjZWxsIGNvbnRlbnQKICAgKi8KICBwdWJsaWMgZ2V0SGVhZGVyQ2VsbE5hbWUoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7CiAgICBpZiAoIXRoaXMuaGVhZGVyQ2VsbHMgfHwgIXRoaXMuaGVhZGVyQ2VsbHMuY29udHJvbHNbaW5kZXhdKSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0KICAgIHJldHVybiB0aGlzLmhlYWRlckNlbGxzLmNvbnRyb2xzW2luZGV4XS52YWx1ZTsKICB9CgogIC8qKgogICAqIFN0b3AgYWNjaWRlbnRhbCBwYWdlIG5hdmlnYXRpb24gd2hlbiBzY3JvbGxpbmcgdG8gdGhlIGVkZ2VzIG9mIHRoZSBDU1YgZm9ybQogICAqCiAgICogQHBhcmFtIGV2ZW50IC0gVGhlIHNjcm9sbCB3aGVlbCBldmVudAogICAqLwogIHB1YmxpYyBvblNjcm9sbChldmVudDogV2hlZWxFdmVudCk6IHZvaWQgewogICAgaWYgKCFldmVudCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBkaXI6IHN0cmluZyA9IChldmVudC5kZWx0YVggPCAwKSA/ICdyaWdodCcgOiAnbGVmdCc7CiAgICAvLyBOT1RFOiBUeXBlU2NyaXB0IGRvZXNuJ3QgYmVsaWV2ZSBgZm9ybWAgZXhpc3RzIG9uIGBFdmVudFRhcmdldGAKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICBjb25zdCB0YXJnZXRFbDogYW55ID0gZXZlbnQudGFyZ2V0OwoKICAgIGlmICghdGFyZ2V0RWwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGJvcmRlclNpemUgPSAyOwogICAgY29uc3Qgc2Nyb2xsUmlnaHQ6IG51bWJlciA9CiAgICAgIHRhcmdldEVsLmZvcm0uc2Nyb2xsV2lkdGggLSAocGFyc2VJbnQodGFyZ2V0RWwuZm9ybS5vZmZzZXRXaWR0aCwgMTApICsgYm9yZGVyU2l6ZSkgLSB0YXJnZXRFbC5mb3JtLnNjcm9sbExlZnQ7CiAgICBjb25zdCBzY3JvbGxMZWZ0ID0gdGFyZ2V0RWwuZm9ybS5zY3JvbGxMZWZ0OwogICAgY29uc3Qgc3RvcFJpZ2h0U2Nyb2xsOiBib29sZWFuID0gKGRpciA9PT0gJ3JpZ2h0JykgJiYgKHNjcm9sbExlZnQgPCAxKTsKICAgIGNvbnN0IHN0b3BMZWZ0U2Nyb2xsOiBib29sZWFuID0gKGRpciA9PT0gJ2xlZnQnKSAmJiAoc2Nyb2xsUmlnaHQgPCAxKTsKCiAgICAvLyBJZiBzY3JvbGxpbmcgaG9yaXpvbnRhbGx5IGFuZCBhdCBlaXRoZXIgZWRnZSwgc3RvcCB0aGUgc2Nyb2xsIGV2ZW50CiAgICBpZiAoZXZlbnQuZGVsdGFYICE9PSAwICYmIChzdG9wUmlnaHRTY3JvbGwgfHwgc3RvcExlZnRTY3JvbGwpKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBDaGFuZ2UgZm9jdXMgdG8gdGhlIGNlbGwgYmVsb3cgdGhlIGN1cnJlbnQgY2VsbAogICAqCiAgICogQHBhcmFtIGN1cnJlbnRDZWxsSWQgLSBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNlbGwKICAgKiBAcGFyYW0gdXAgLSBUaGUgZGlyZWN0aW9uIHRvIG1vdmUgKHVwIHZzIGRvd24pCiAgICovCiAgcHVibGljIHNlbGVjdENlbGxJbk5leHRSb3coY3VycmVudENlbGxJZDogc3RyaW5nLCB1cD86IGJvb2xlYW4pOiB2b2lkIHsKICAgIGlmICghY3VycmVudENlbGxJZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBbcm93SWQsIGNvbHVtbklkXTogc3RyaW5nW10gPSBjdXJyZW50Q2VsbElkLnNwbGl0KCdYJyk7CiAgICBjb25zdCByb3c6IHN0cmluZyA9IHJvd0lkLnNwbGl0KCdfJylbMl07CiAgICBjb25zdCBjb2x1bW46IHN0cmluZyA9IGNvbHVtbklkLnNwbGl0KCdfJylbMV07CiAgICBjb25zdCBuZXdJZCA9IGAke3RoaXMudWlkfV9yXyR7cGFyc2VJbnQocm93LCAxMCkgKyAodXAgPyAtMSA6IDEpfVhjXyR7Y29sdW1ufWA7CiAgICBjb25zdCBpbnB1dDogSFRNTEVsZW1lbnQgfCBudWxsID0gdGhpcy5kb2N1bWVudFNlcnZpY2UuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7bmV3SWR9YCk7CgogICAgaWYgKGlucHV0KSB7CiAgICAgIGlucHV0LmZvY3VzKCk7CiAgICB9IGVsc2UgewogICAgICAvLyBFbHNlIHdlIG11c3QgYmUgb24gdGhlIGxhc3Qgcm93IHNvIHdlIGFkZCBvbmUgbW9yZQogICAgICB0aGlzLmFkZFJvd3MoKTsKICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7CiAgICAgIHRoaXMuc2VsZWN0Q2VsbEluTmV4dFJvdyhjdXJyZW50Q2VsbElkKTsKICAgIH0KICB9CgogIC8qKgogICAqIFNlbGVjdCB0aGUgbmV4dCBjZWxsIG9yIHByZXZpb3VzIGNlbGwKICAgKgogICAqIEBwYXJhbSBldmVudCAtIFRoZSBLZXlib2FyZEV2ZW50CiAgICogQHBhcmFtIGN1cnJlbnRDZWxsSWQgLSBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNlbGwKICAgKiBAcGFyYW0gcHJldmlvdXMgLSBJZiB0aGUgbW92ZW1lbnQgaXMgZm9yd2FyZCBvciBiYWNrd2FyZAogICAqLwogIHB1YmxpYyBzZWxlY3RBZGphY2VudENlbGwoZXZlbnQ6IEtleWJvYXJkRXZlbnQsIGN1cnJlbnRDZWxsSWQ6IHN0cmluZywgcHJldmlvdXM/OiBib29sZWFuKTogdm9pZCB7CiAgICAvLyBQcmV2ZW50IG5hdGl2ZSB0YWJpbmRleCBmdW5jdGlvbmFsaXR5CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgcHJldmlvdXMgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkocHJldmlvdXMpOwogICAgY29uc3QgW3Jvd0lkLCBjb2x1bW5JZF06IHN0cmluZ1tdID0gY3VycmVudENlbGxJZC5zcGxpdCgnWCcpOwogICAgY29uc3Qgcm93OiBudW1iZXIgPSBwYXJzZUludChyb3dJZC5zcGxpdCgnXycpWzJdLCAxMCk7CiAgICBjb25zdCBjb2x1bW46IG51bWJlciA9IHBhcnNlSW50KGNvbHVtbklkLnNwbGl0KCdfJylbMV0sIDEwKTsKICAgIGNvbnN0IGlzRmlyc3RDb2x1bW46IGJvb2xlYW4gPSBjb2x1bW4gPT09IDA7CiAgICBjb25zdCBpc0xhc3RDb2x1bW46IGJvb2xlYW4gPSBjb2x1bW4gPT09ICh0aGlzLmNvbHVtbkNvdW50IC0gMSk7CiAgICBsZXQgbmV3Q29sdW1uTnVtYmVyOiBudW1iZXI7CiAgICBsZXQgbmV3Um93TnVtYmVyOiBudW1iZXIgPSByb3c7CiAgICAvLyBJZiBmaXJzdCBjb2x1bW4sIG1vdmUgdG8gbGFzdCBjb2x1bW4gb2YgcHJldmlvdXMgcm93CiAgICBpZiAocHJldmlvdXMpIHsKICAgICAgLy8gQmFja3dhcmQKICAgICAgaWYgKGlzRmlyc3RDb2x1bW4pIHsKICAgICAgICBuZXdDb2x1bW5OdW1iZXIgPSB0aGlzLmNvbHVtbkNvdW50IC0gMTsKICAgICAgICBuZXdSb3dOdW1iZXIgKz0gLTE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV3Q29sdW1uTnVtYmVyID0gY29sdW1uIC0gMTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc0xhc3RDb2x1bW4pIHsKICAgICAgLy8gRm9yd2FyZAogICAgICBuZXdDb2x1bW5OdW1iZXIgPSAwOwogICAgICBuZXdSb3dOdW1iZXIgKz0gMTsKICAgIH0gZWxzZSB7CiAgICAgIG5ld0NvbHVtbk51bWJlciA9IGNvbHVtbiArIDE7CiAgICB9CiAgICBjb25zdCBuZXdJZCA9IGAke3RoaXMudWlkfV9yXyR7bmV3Um93TnVtYmVyfVhjXyR7bmV3Q29sdW1uTnVtYmVyfWA7CiAgICBjb25zdCBpbnB1dDogSFRNTEVsZW1lbnQgfCBudWxsID0gdGhpcy5kb2N1bWVudFNlcnZpY2UuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7bmV3SWR9YCk7CgogICAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UKICAgIGlmIChpbnB1dCkgewogICAgICBpbnB1dC5mb2N1cygpOwogICAgfQogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGFuIElEIGZvciBhIGNlbGwuIEZvcm1hdDogYHRzLWNzdi1lbnRyeS17bnVtYmVyfV9yXzdYY18yYCB3b3VsZCBiZSB0aGUgMm5kIGNlbGwgaW4gdGhlIDd0aCByb3cuCiAgICoKICAgKiBAcGFyYW0gcmVjb3JkSW5kZXggLSBUaGUgaW5kZXggb2YgdGhlIHJlY29yZC9yb3cKICAgKiBAcGFyYW0gY2VsbEluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSBjZWxsIHdpdGhpbiB0aGUgcm93CiAgICogQHJldHVybnMgVGhlIElECiAgICovCiAgcHVibGljIGNyZWF0ZUlkKHJlY29yZEluZGV4OiBudW1iZXIsIGNlbGxJbmRleDogbnVtYmVyKTogc3RyaW5nIHsKICAgIHJldHVybiBgJHt0aGlzLnVpZH1fcl8ke3JlY29yZEluZGV4fVhjXyR7Y2VsbEluZGV4fWA7CiAgfQoKICAvKioKICAgKiBDb2xsZWN0IGFsbCBlcnJvcnMgZnJvbSB0aGUgcmVjb3Jkc0Zvcm0gYW5kIHNldCB0byBhbGxFcnJvcnMKICAgKi8KICBwdWJsaWMgY29sbGVjdEVycm9ycygpOiBUc0NTVkZvcm1FcnJvcltdIHwgbnVsbCB7CiAgICBjb25zdCBncm91cDogRm9ybUFycmF5IHwgbnVsbCA9IHRoaXMucmVjb3Jkc0Zvcm0uZ2V0KCdyZWNvcmRzJykgYXMgRm9ybUFycmF5OwoKICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICBpZiAoZ3JvdXApIHsKICAgICAgY29uc3QgZXJyb3JzID0gdGhpcy5nZXRGb3JtRXJyb3JzKGdyb3VwKTsKCiAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoZXJyb3JzKS5tYXAoa2V5ID0+ICh7CiAgICAgICAgICBjb250cm9sOiBrZXksCiAgICAgICAgICAvLyBEZS1kdXBsaWNhdGUgdGhlIGVycm9ycyBhcnJheQogICAgICAgICAgW2tleV06IGVycm9yc1trZXldLmZpbHRlcigoZWwsIGksIGFycikgPT4gYXJyLmluZGV4T2YoZWwpID09PSBpKSwKICAgICAgICB9KSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8qKgogICAqIEdldCBhbGwgdmFsaWRhdGlvbiBtZXNzYWdlcwogICAqCiAgICogTk9URTogQ3VycmVudGx5IHRoaXMgb25seSBzdXBwb3J0cyBhIGN1c3RvbSBlcnJvciBtZXNzYWdlIGZvciBVUkwgdmFsaWRhdGlvbi4gT3RoZXIgbWVzc2FnZXMgY2FuIGJlIGFkZGVkIHdoZW4gdGhlIG5lZWQgYXJpc2VzLgogICAqIEZJWE1FOiBGaW5kIGEgd2F5IHRvIHVzZSB0aGUgZXhpc3RpbmcgVmFsaWRhdGlvbk1lc3NhZ2VzU2VydmljZQogICAqCiAgICogQHJldHVybnMgVGhlIGFycmF5IG9mIHZhbGlkYXRpb24gbWVzc2FnZXMKICAgKi8KICBwdWJsaWMgZ2V0IHZhbGlkYXRpb25NZXNzYWdlcygpOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCB7CiAgICBpZiAoIXRoaXMuYWxsRXJyb3JzKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CiAgICBjb25zdCBtZXNzYWdlczogc3RyaW5nW10gPSBbXTsKCiAgICBmb3IgKGNvbnN0IGVycm9yT2JqIG9mIHRoaXMuYWxsRXJyb3JzKSB7CiAgICAgIGNvbnN0IG5hbWU6IHN0cmluZyA9IGVycm9yT2JqLmNvbnRyb2w7CgogICAgICBmb3IgKGNvbnN0IGVycm9yIG9mIGVycm9yT2JqW25hbWVdKSB7CiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnJzsKICAgICAgICAvLyBUaGUgSUQgaXMgemVyby1iYXNlZAogICAgICAgIG1lc3NhZ2UgKz0gYDxiPlJvdyAke3BhcnNlSW50KGVycm9yLnJvd0lkLCAxMCkgKyAxfTo8L2I+IGA7CiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UKICAgICAgICBpZiAobmFtZSA9PT0gJ3VybCcpIHsKICAgICAgICAgIGNvbnN0IG1heEl0ZW1MZW5ndGggPSAyMDsKICAgICAgICAgIGNvbnN0IGVycm9ySXRlbSA9IChlcnJvci5hY3R1YWwubGVuZ3RoID4gbWF4SXRlbUxlbmd0aCkgPyBgJHtlcnJvci5hY3R1YWwuc2xpY2UoMCwgbWF4SXRlbUxlbmd0aCkgIH0uLi5gIDogZXJyb3IuYWN0dWFsOwogICAgICAgICAgbWVzc2FnZSArPSBgIiR7ZXJyb3JJdGVtfSIgaXMgbm90IGEgdmFsaWQgVVJMLmA7CiAgICAgICAgfQogICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICAgICAgaWYgKG5hbWUgPT09ICdyZXF1aXJlZCcpIHsKICAgICAgICAgIG1lc3NhZ2UgKz0gYENvbnRlbnQgaXMgcmVxdWlyZWQuYDsKICAgICAgICB9CiAgICAgICAgbWVzc2FnZXMucHVzaChtZXNzYWdlKTsKICAgICAgfQogICAgfQoKICAgIC8vIElmIG1vcmUgbWVzc2FnZXMgdGhhbiBhbGxvd2VkIGV4aXN0LCB0cnVuY2F0ZSB0aGUgbGlzdCB3aXRoIGEgbWVzc2FnZQogICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IERFRkFVTFRfVkFMSURBVElPTl9NRVNTQUdFU19NQVgpIHsKICAgICAgY29uc3QgY291bnQgPSBtZXNzYWdlcy5sZW5ndGggLSBERUZBVUxUX1ZBTElEQVRJT05fTUVTU0FHRVNfTUFYOwogICAgICBtZXNzYWdlcy5sZW5ndGggPSBERUZBVUxUX1ZBTElEQVRJT05fTUVTU0FHRVNfTUFYOwogICAgICBtZXNzYWdlcy5wdXNoKGBhbmQgJHtjb3VudH0gbW9yZSBlcnJvcnMuLi5gKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZXMubGVuZ3RoID4gMCA/IG1lc3NhZ2VzIDogdW5kZWZpbmVkOwogIH0KCiAgLyoqCiAgICogRGVsZXRlIGEgcm93CiAgICoKICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggb2YgdGhlIHJvdyB0byBkZWxldGUKICAgKi8KICBwdWJsaWMgZGVsZXRlUm93KGluZGV4OiBudW1iZXIpOiB2b2lkIHsKICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkIHx8IGluZGV4ID09PSBudWxsIHx8IGluZGV4IDwgMCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5yb3dzLnJlbW92ZUF0KGluZGV4KTsKICAgIHRoaXMudXBkYXRlQWxsUm93SWRzKCk7CiAgICB0aGlzLnVwZGF0ZUVycm9ycygpOwogIH0KCiAgLyoqCiAgICogUmVzZXQgdGhlIHRhYmxlIHRvIGl0J3MgaW5pdGlhbCBzdGF0ZQogICAqLwogIHB1YmxpYyByZXNldFRhYmxlKCk6IHZvaWQgewogICAgdGhpcy5jbGVhckFsbFJvd3MoKTsKICAgIHRoaXMuY2xlYXJIZWFkZXJDZWxscygpOwogICAgdGhpcy5jb2x1bW5Db3VudCA9IHRoaXMub3JpZ2luYWxDb2x1bW5Db3VudDsKICAgIHRoaXMuYWRkUm93cyh0aGlzLnJvd0NvdW50LCB0aGlzLmNvbHVtbkNvdW50KTsKICAgIHRoaXMuYWRkSGVhZGVycyh0aGlzLmNvbHVtbkNvdW50LCB0aGlzLmNvbHVtbkhlYWRlcnMpOwogICAgdGhpcy5hbGxFcnJvcnMgPSBudWxsOwogIH0KCiAgLyoqCiAgICogR2V0IGFsbCBmb3JtIGVycm9ycyBmcm9tIGEgRm9ybUdyb3VwIG9yIEZvcm1BcnJheQogICAqCiAgICogTk9URTogVGhpcyBleHRlcm5hbCBmdW5jdGlvbiBhbmQgYHJlc3VsdGAgb2JqZWN0IGlzIG5lZWRlZCBzaW5jZSBgZ2V0QWxsRXJyb3JzYCBtYXkgYmUgcmVjdXJzaXZlCiAgICoKICAgKiBAcGFyYW0gZm9ybSAtIFRoZSBmb3JtCiAgICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIGVycm9ycwogICAqLwogIHByaXZhdGUgZ2V0Rm9ybUVycm9ycyhmb3JtOiBGb3JtR3JvdXAgfCBGb3JtQXJyYXkpOiB7cmVxdWlyZWQ/OiBUc0NTVlJlcXVpcmVkRXJyb3I7IHVybD86IFRzQ1NWVXJsRXJyb3J9IHsKICAgIGNvbnN0IHJlc3VsdDoge3JlcXVpcmVkPzogVHNDU1ZSZXF1aXJlZEVycm9yOyB1cmw/OiBUc0NTVlVybEVycm9yfSA9IHt9OwogICAgdGhpcy5nZXRBbGxFcnJvcnMoZm9ybSwgcmVzdWx0KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICAvKioKICAgKiBHZXQgYWxsIGVycm9ycyBmb3IgdGhlIGZvcm0KICAgKgogICAqIEBwYXJhbSBmb3JtIC0gVGhlIHByaW1hcnkgZm9ybSBncm91cAogICAqIEBwYXJhbSByZXN1bHQgLSBUaGUgY29sbGVjdGlvbiBvZiBlcnJvcnMKICAgKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyBhbGwgZXJyb3JzCiAgICovCiAgcHJpdmF0ZSBnZXRBbGxFcnJvcnMoZm9ybTogRm9ybUdyb3VwIHwgRm9ybUFycmF5LCByZXN1bHQ6IHtyZXF1aXJlZD86IFRzQ1NWUmVxdWlyZWRFcnJvcjsgdXJsPzogVHNDU1ZVcmxFcnJvcn0pOiB2b2lkIHsKICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmb3JtLmNvbnRyb2xzKTsKCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1mb3Itb2YKICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCBjdHJsID0gZm9ybS5nZXQoa2V5c1tpXSk7CgogICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgZWxzZQogICAgICBpZiAoY3RybCkgewogICAgICAgIGNvbnN0IGVycm9ycyA9IChjdHJsIGluc3RhbmNlb2YgRm9ybUdyb3VwIHx8IGN0cmwgaW5zdGFuY2VvZiBGb3JtQXJyYXkpID8gdGhpcy5nZXRBbGxFcnJvcnMoY3RybCwgcmVzdWx0KSA6IGN0cmwuZXJyb3JzOwoKICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgZWxzZQogICAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICAgIC8vIEdldCB0aGUgcmVjb3JkIElEIGZyb20gdGhlIGdyYW5kcGFyZW50IGNvbnRyb2wKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICAgICAgICBjb25zdCBncmFuZHBhcmVudENvbnRyb2xzOiBhbnkgPSBjdHJsLnBhcmVudC5wYXJlbnQuY29udHJvbHM7CiAgICAgICAgICBjb25zdCByb3dJZDogbnVtYmVyIHwgdW5kZWZpbmVkID0gZ3JhbmRwYXJlbnRDb250cm9scy5yZWNvcmRJZAogICAgICAgICAgICA/IGdyYW5kcGFyZW50Q29udHJvbHMucmVjb3JkSWQudmFsdWUgLyogaXN0YW5idWwgaWdub3JlIG5leHQgLSBVbnJlYWNoYWJsZSAqLyA6IHVuZGVmaW5lZDsKICAgICAgICAgIGNvbnN0IGVycm9yS2V5cyA9IE9iamVjdC5rZXlzKGVycm9ycyk7CgogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9wcmVmZXItZm9yLW9mCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVycm9yS2V5cy5sZW5ndGg7IGogKz0gMSkgewogICAgICAgICAgICBjb25zdCBlcnJvcktleTogc3RyaW5nID0gZXJyb3JLZXlzW2pdOwogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgICAgICAgICBsZXQgZXJyb3I6IFJlY29yZDxzdHJpbmcsIGFueT4gPSBlcnJvcnNbZXJyb3JLZXlzW2pdXTsKCiAgICAgICAgICAgIC8vIEFuZ3VsYXIgYnVpbHQgaW4gcmVxdWlyZWQgdmFsaWRhdG9yIG9ubHkgcmV0dXJucyBhIGJvb2xlYW4KICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICAgICAgZXJyb3IgPSB7IHZhbGlkOiBmYWxzZSB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJZiB0aGUgcm93SWQgZXhpc3RzLCBhZGQgaXQgdG8gdGhlIGVycm9ycyBvYmplY3QKICAgICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UKICAgICAgICAgICAgaWYgKHJvd0lkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBlcnJvci5yb3dJZCA9IHJvd0lkOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBZGQgdGhpcyBlcnJvciB0byB0aGUgcmVzdWx0IG9iamVjdAogICAgICAgICAgICBpZiAocmVzdWx0W2Vycm9yS2V5XSkgewogICAgICAgICAgICAgIHJlc3VsdFtlcnJvcktleV0ucHVzaChlcnJvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0W2Vycm9yS2V5XSA9IFtlcnJvcl07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIENsZWFyIGFsbCByb3dzCiAgICovCiAgcHJpdmF0ZSBjbGVhckFsbFJvd3MoKTogdm9pZCB7CiAgICB0aGlzLnJlY29yZHNGb3JtLnNldENvbnRyb2woJ3JlY29yZHMnLCB0aGlzLmZvcm1CdWlsZGVyLmFycmF5KFtdKSk7CiAgfQoKICAvKioKICAgKiBDbGVhciBoZWFkZXIgY2VsbHMKICAgKi8KICBwcml2YXRlIGNsZWFySGVhZGVyQ2VsbHMoKTogdm9pZCB7CiAgICB0aGlzLnJlY29yZHNGb3JtLnNldENvbnRyb2woJ2hlYWRlcnMnLCB0aGlzLmZvcm1CdWlsZGVyLmFycmF5KFtdKSk7CiAgfQoKICAvKioKICAgKiBBZGQgaGVhZGVyIGNvbnRlbnQgdG8gdGhlIGZvcm0KICAgKgogICAqIEBwYXJhbSBoZWFkZXJDb3VudCAtIFRoZSBudW1iZXIgb2YgaGVhZGVyIGNlbGxzCiAgICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY2VsbCdzIGNvbnRlbnQKICAgKi8KICBwcml2YXRlIGFkZEhlYWRlcnMoaGVhZGVyQ291bnQ6IG51bWJlciwgY29udGVudD86IHN0cmluZ1tdKTogdm9pZCB7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWRlckNvdW50OyBpICs9IDEpIHsKICAgICAgY29uc3QgdmFsdWU6IHN0cmluZyB8IG51bGwgPSAoY29udGVudCAmJiBjb250ZW50W2ldKSA/IGNvbnRlbnRbaV0gOiBudWxsOwogICAgICBjb25zdCBjdHJsID0gdmFsdWUgPyBuZXcgRm9ybUNvbnRyb2wodmFsdWUpIDogbmV3IEZvcm1Db250cm9sKCk7CiAgICAgIHRoaXMuaGVhZGVyQ2VsbHMuc2V0Q29udHJvbChpLCBjdHJsKTsKICAgIH0KICB9CgogIC8qKgogICAqIENyZWF0ZSBhIHJvdwogICAqCiAgICogQHBhcmFtIGlkIC0gVGhlIHJvdydzIElECiAgICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY29sdW1uJ3MgY29udGVudAogICAqIEByZXR1cm5zIFRoZSBGb3JtR3JvdXAKICAgKi8KICBwcml2YXRlIGNyZWF0ZVJvdyhpZDogbnVtYmVyLCBjb250ZW50Pzogc3RyaW5nW10gfCBudWxsKTogRm9ybUdyb3VwIHsKICAgIHJldHVybiB0aGlzLmZvcm1CdWlsZGVyLmdyb3VwKHsKICAgICAgcmVjb3JkSWQ6IG5ldyBGb3JtQ29udHJvbChpZCksCiAgICAgIGNvbHVtbnM6IHRoaXMuZm9ybUJ1aWxkZXIuYXJyYXkodGhpcy5jcmVhdGVDb2x1bW5zKHRoaXMuY29sdW1uQ291bnQsIGNvbnRlbnQpKSwKICAgIH0pOwogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGFuIGFycmF5IG9mIGNvbHVtbnMKICAgKgogICAqIEBwYXJhbSBjb3VudCAtIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBjcmVhdGUKICAgKiBAcGFyYW0gY29udGVudCAtIEFuIGFycmF5IG9mIGNvbnRlbnQgdG8gc2VlZCB0aGUgY29sdW1ucyB3aXRoCiAgICogQHJldHVybnMgVGhlIGFycmF5IG9mIGZvcm0gY29udHJvbHMKICAgKi8KICBwcml2YXRlIGNyZWF0ZUNvbHVtbnMoY291bnQ6IG51bWJlciwgY29udGVudD86IHN0cmluZ1tdIHwgbnVsbCk6IEZvcm1Db250cm9sW10gewogICAgY29uc3QgY29sdW1uczogRm9ybUNvbnRyb2xbXSA9IFtdOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkgewogICAgICBsZXQgdmFsdWU6IHN0cmluZyB8IG51bGwgPSAoY29udGVudCAmJiBjb250ZW50W2ldKSA/IGNvbnRlbnRbaV0gOiBudWxsOwoKICAgICAgLy8gU3RyaXAgYW55IGNvbnRyb2wgY2hhcmFjdGVycwogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB2YWx1ZSA9IHN0cmlwQ29udHJvbENoYXJhY3RlcnModmFsdWUpOwogICAgICB9CgogICAgICBjb25zdCB2YWxpZGF0b3I6IFZhbGlkYXRvckZuIHwgbnVsbCA9CiAgICAgICAgdGhpcy5jb2x1bW5WYWxpZGF0b3JzID8gdGhpcy5jb2x1bW5WYWxpZGF0b3JzW2ldIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0IC0gVW5yZWFjaGFibGUgKi8gOiBudWxsOwogICAgICBjb2x1bW5zLnB1c2gobmV3IEZvcm1Db250cm9sKHZhbHVlLCB2YWxpZGF0b3IpKTsKICAgIH0KCiAgICByZXR1cm4gY29sdW1uczsKICB9CgogIC8qKgogICAqIEdlbmVyYXRlIGEgRmlsZSBibG9iIGZyb20gdGhlIGZvcm0gY29udGVudHMKICAgKgogICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIHJlY29yZEZvcm0gY29udGVudAogICAqIEByZXR1cm5zIFRoZSBGaWxlIGJsb2IKICAgKi8KICBwcml2YXRlIGdlbmVyYXRlQmxvYihjb250ZW50OiBUc0NTVkZvcm1Db250ZW50cyk6IEJsb2IgewogICAgY29uc3QgcHJlZml4ID0gJ2RhdGE6dGV4dC9jc3Y7Y2hhcnNldD11dGYtOCwnOwogICAgY29uc3QgaGVhZGVycyA9IGAke2NvbnRlbnQuaGVhZGVycy5qb2luKCdcdCcpICB9XHJcbmA7CiAgICAvLyBFbmNhcHN1bGF0ZSBjb250ZW50IHdpdGggcXVvdGVzIGFuZCBlc2NhcGUgYW55IGV4aXN0aW5nIHF1b3RlcwogICAgY29uc3Qgcm93cyA9CiAgICAgIGAke2NvbnRlbnQucmVjb3Jkcy5tYXAodiA9PiB2LmNvbHVtbnMubWFwKGNvbHVtbiA9PiAoY29sdW1uID8gYCIke2NvbHVtbi5yZXBsYWNlKC8iL2csICciIicpfSJgIDogJycpKS5qb2luKCdcdCcpKQogICAgICAgIC5qb2luKCdcclxuJykgIH1cclxuYDsKICAgIGxldCBqb2luZWQ6IHN0cmluZyA9IHByZWZpeCArIGhlYWRlcnMgKyByb3dzOwogICAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UKICAgIGlmICh0aGlzLm91dHB1dEZvcm1hdCA9PT0gJ2NzdicpIHsKICAgICAgam9pbmVkID0gSlNPTi5zdHJpbmdpZnkoam9pbmVkKS5yZXBsYWNlKC9cXHQvZywgJywnKTsKICAgIH0KCiAgICByZXR1cm4gbmV3IEJsb2IoW2pvaW5lZF0sIHsgdHlwZTogJ3RleHQvY3N2JyB9KTsKICB9Cn0K</text>
      </register>
      <register name="+" type="2">
        <text encoding="base64">ICAgICAgLy8gTm9ybWFsaXplIHRoZSBvdXRwdXQgc28gd2UgcmV0dXJuIGEgY29uc2lzdGVudCB0eXBlLgo=</text>
      </register>
      <register name="-" type="4">
        <text>reset button</text>
      </register>
      <register name="/" type="4">
        <text>reset</text>
      </register>
      <register name="0" type="2">
        <text encoding="base64">Ly8gTk9URTogTW92aW5nIGl0ZW1zIGxpa2UgYGdldEhlYWRlckNlbGxOYW1lYCBpbnRvIHRoZSB0ZW1wbGF0ZSB3b3VsZCBhZGQgdG9vIG11Y2ggbG9naWMgdG8gdGhlIHRlbXBsYXRlCi8vIE5PVEU6IFVzaW5nIHRyYWNrQnkgb24gZm9ybSBncm91cHMgYWN0dWFsbHkgY2hhbmdlcyB0aGUgb3V0cHV0IHNpbmNlIHRoZXJlIGlzIG5vIHN0YXRpYyBJRCB0byByZWZlcmVuY2UKaW1wb3J0IHsKICBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwKICBDaGFuZ2VEZXRlY3RvclJlZiwKICBDb21wb25lbnQsCiAgRXZlbnRFbWl0dGVyLAogIElucHV0LAogIE9uRGVzdHJveSwKICBPbkluaXQsCiAgT3V0cHV0LAogIFZpZXdFbmNhcHN1bGF0aW9uLAp9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnOwppbXBvcnQgewogIEZvcm1BcnJheSwKICBGb3JtQnVpbGRlciwKICBGb3JtQ29udHJvbCwKICBGb3JtR3JvdXAsCiAgVmFsaWRhdG9yRm4sCn0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnOwppbXBvcnQgeyBUc0RvY3VtZW50U2VydmljZSB9IGZyb20gJ0B0ZXJtaW51cy9uZ3gtdG9vbHMvYnJvd3Nlcic7CmltcG9ydCB7CiAgY29lcmNlQm9vbGVhblByb3BlcnR5LAogIGNvZXJjZU51bWJlclByb3BlcnR5LAp9IGZyb20gJ0B0ZXJtaW51cy9uZ3gtdG9vbHMvY29lcmNpb24nOwppbXBvcnQgeyB1bnRpbENvbXBvbmVudERlc3Ryb3llZCB9IGZyb20gJ0B0ZXJtaW51cy9uZ3gtdG9vbHMvdXRpbGl0aWVzJzsKaW1wb3J0IHsgVFNfU1BBQ0lORyB9IGZyb20gJ0B0ZXJtaW51cy91aS9zcGFjaW5nJzsKaW1wb3J0IHsgc3RyaXBDb250cm9sQ2hhcmFjdGVycyB9IGZyb20gJ0B0ZXJtaW51cy91aS91dGlsaXRpZXMnOwppbXBvcnQgeyBkZWJvdW5jZVRpbWUgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7CgoKLyoqCiAqIFRoZSBzdHJ1Y3R1cmUgZm9yIGFuIGluZGl2aWR1YWwgcm93CiAqLwpleHBvcnQgaW50ZXJmYWNlIFRzQ1NWRW50cnlSZWNvcmQgewogIHJlY29yZElkOiBudW1iZXI7CiAgY29sdW1uczogKHN0cmluZyB8IG51bGwpW107Cn0KCi8qKgogKiBUaGUgc3RydWN0dXJlIGZvciB0aGUgZm9ybQogKi8KZXhwb3J0IGludGVyZmFjZSBUc0NTVkZvcm1Db250ZW50cyB7CiAgaGVhZGVyczogc3RyaW5nW107CiAgcmVjb3JkczogVHNDU1ZFbnRyeVJlY29yZFtdOwp9CgovKioKICogVGhlIHN0cnVjdHVyZSBmb3IgYSByZXF1aXJlZCBlcnJvcgogKi8KZXhwb3J0IGludGVyZmFjZSBUc0NTVlJlcXVpcmVkRXJyb3IgewogIHJvd0lkOiBudW1iZXI7CiAgdmFsaWQ6IGJvb2xlYW47Cn0KCi8qKgogKiBUaGUgc3RydWN0dXJlIGZvciBhIFVSTCBlcnJvcgogKi8KZXhwb3J0IGludGVyZmFjZSBUc0NTVlVybEVycm9yIHsKICBhY3R1YWw6IHN0cmluZzsKICByb3dJZDogbnVtYmVyOwogIHZhbGlkOiBib29sZWFuOwp9CgovKioKICogVGhlIHN0cnVjdHVyZSBmb3IgdGhlIGVycm9yIHNldAogKi8KZXhwb3J0IGludGVyZmFjZSBUc0NTVkZvcm1FcnJvciB7CiAgLy8gVGhlIGNvbnRyb2wgbmFtZQogIGNvbnRyb2w6IHN0cmluZzsKICByZXF1aXJlZD86IFRzQ1NWUmVxdWlyZWRFcnJvcjsKICB1cmw/OiBUc0NTVlVybEVycm9yOwp9CgovKioKICogVGhlIHN0cnVjdHVyZSBmb3IgYSByb3cKICovCmV4cG9ydCBpbnRlcmZhY2UgVHNDU1ZSb3cgewogIHJlY29yZElkOiBGb3JtQ29udHJvbDsKICBjb2x1bW5zOiBGb3JtQXJyYXk7Cn0KCgovKioKICogVW5pcXVlIElEIGZvciBlYWNoIGluc3RhbmNlCiAqLwpsZXQgbmV4dFVuaXF1ZUlkID0gMDsKY29uc3QgREVGQVVMVF9ST1dfQ09VTlQgPSA0Owpjb25zdCBERUZBVUxUX0NPTFVNTl9DT1VOVCA9IDI7CmNvbnN0IERFRkFVTFRfTUFYX1JPV1MgPSAyMDAwOwpjb25zdCBERUZBVUxUX1ZBTElEQVRJT05fTUVTU0FHRVNfTUFYID0gNjsKCgovKioKICogVGhpcyBpcyB0aGUgY3N2LWVudHJ5IFVJIENvbXBvbmVudAogKgogKiBAZXhhbXBsZQogKiA8dHMtY3N2LWVudHJ5CiAqICAgICAgICAgICAgICBjb2x1bW5Db3VudD0iNiIKICogICAgICAgICAgICAgIFtjb2x1bW5IZWFkZXJzXT0iYXJyYXlPZkhlYWRlcnMiCiAqICAgICAgICAgICAgICBbY29sdW1uVmFsaWRhdG9yc109ImFycmF5T2ZWYWxpZGF0b3JzIgogKiAgICAgICAgICAgICAgW2Zvb3RlckRpcmVjdGlvbl09Imx0ciIKICogICAgICAgICAgICAgIFtmdWxsV2lkdGhdPSJmYWxzZSIKICogICAgICAgICAgICAgIGlkPSJteS1pZCIKICogICAgICAgICAgICAgIG1heFJvd3M9IjEwMDAiCiAqICAgICAgICAgICAgICByb3dDb3VudD0iMTIiCiAqICAgICAgICAgICAgICBvdXRwdXRGb3JtYXQ9ImNzdiIKICogICAgICAgICAgICAgIChibG9iR2VuZXJhdGVkKT0iaGFuZGxlVGhlRmlsZUJsb2IoJGV2ZW50KSIKICogPjwvdHMtY3N2LWVudHJ5PgogKgogKiA8ZXhhbXBsZS11cmw+aHR0cHM6Ly9nZXR0ZXJtaW51cy5naXRodWIuaW8vdWktZGVtb3MtcmVsZWFzZS9jb21wb25lbnRzL2Nzdi1lbnRyeTwvZXhhbXBsZS11cmw+CiAqLwpAQ29tcG9uZW50KHsKICBzZWxlY3RvcjogJ3RzLWNzdi1lbnRyeScsCiAgdGVtcGxhdGVVcmw6ICcuL2Nzdi1lbnRyeS5jb21wb25lbnQuaHRtbCcsCiAgc3R5bGVVcmxzOiBbJy4vY3N2LWVudHJ5LmNvbXBvbmVudC5zY3NzJ10sCiAgaG9zdDogewogICAgJ2NsYXNzJzogJ3RzLWNzdi1lbnRyeScsCiAgICAnW2NsYXNzLmMtY3N2LWVudHJ5LS1mdWxsLXdpZHRoXSc6ICdmdWxsV2lkdGgnLAogICAgJ1thdHRyLmlkXSc6ICdpZCcsCiAgfSwKICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCwKICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLAogIGV4cG9ydEFzOiAndHNDU1ZFbnRyeScsCn0pCmV4cG9ydCBjbGFzcyBUc0NTVkVudHJ5Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kgewogIHByaXZhdGUgb3JpZ2luYWxDb2x1bW5Db3VudCA9IERFRkFVTFRfQ09MVU1OX0NPVU5UOwogIC8qKgogICAqIERlZmluZSB0aGUgZGVmYXVsdCBjb21wb25lbnQgSUQKICAgKi8KICBwcm90ZWN0ZWQgdWlkID0gYHRzLWNzdi1lbnRyeS0ke25leHRVbmlxdWVJZCsrfWA7CgogIC8qKgogICAqIERlZmluZSB0aGUgc3RhdGljIGhlaWdodCBuZWVkZWQgaW4gdGhlIERPTSBmb3IgdGhlIGV4dGVybmFsIHJvd3MKICAgKi8KICBwdWJsaWMgZmFrZVJvd0hlaWdodCA9ICczNXB4JzsKCiAgLyoqCiAgICogRXhwb3NlIHRoZSBmbGV4Ym94IGxheW91dCBnYXAKICAgKi8KICBwdWJsaWMgbGF5b3V0R2FwOiBzdHJpbmcgPSBUU19TUEFDSU5HLnNtYWxsWzBdOwoKICAvKioKICAgKiBFeHBvc2UgYSB2YWxpZGF0aW9uIG1lc3NhZ2UgaWYgdG9vIG1hbnkgcm93cyBhcmUgYWRkZWQKICAgKi8KICBwdWJsaWMgdG9vTWFueVJvd3NNZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbDsKCiAgLyoqCiAgICogU3RvcmUgcmVjb3JkcyAocm93cykKICAgKi8KICBwdWJsaWMgcmVjb3JkczogVHNDU1ZFbnRyeVJlY29yZFtdID0gW107CgogIC8qKgogICAqIEluaXRpYWxpemUgdGhlIHJlY29yZHMgZm9ybSB3aXRoIGFuIGVtcHR5IGFycmF5CiAgICovCiAgcHVibGljIHJlY29yZHNGb3JtOiBGb3JtR3JvdXAgPSB0aGlzLmZvcm1CdWlsZGVyLmdyb3VwKHsKICAgIGhlYWRlcnM6IHRoaXMuZm9ybUJ1aWxkZXIuYXJyYXkoW10pLAogICAgcmVjb3JkczogdGhpcy5mb3JtQnVpbGRlci5hcnJheShbXSksCiAgfSk7CgogIC8qKgogICAqIFN0b3JlIGEgcmVmZXJlbmNlIHRvIGFsbCBleGlzdGluZyBlcnJvcnMKICAgKi8KICBwdWJsaWMgYWxsRXJyb3JzOiBUc0NTVkZvcm1FcnJvcltdIHwgbnVsbCA9IG51bGw7CgogIC8qKgogICAqIEdldCBoZWFkZXIgY2VsbHMgYXMgYSBmb3JtIGFycmF5CiAgICovCiAgcHVibGljIGdldCBoZWFkZXJDZWxscygpOiBGb3JtQXJyYXkgewogICAgcmV0dXJuIHRoaXMucmVjb3Jkc0Zvcm0uZ2V0KCdoZWFkZXJzJykgYXMgRm9ybUFycmF5OwogIH0KCiAgLyoqCiAgICogR2V0IHJvd3MgYXMgYSBmb3JtIGFycmF5CiAgICovCiAgcHVibGljIGdldCByb3dzKCk6IEZvcm1BcnJheSB7CiAgICByZXR1cm4gdGhpcy5yZWNvcmRzRm9ybS5nZXQoJ3JlY29yZHMnKSBhcyBGb3JtQXJyYXk7CiAgfQoKICAvKioKICAgKiBTZXQgdGhlIG51bWJlciBvZiBjb2x1bW5zCiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBzZXQgY29sdW1uQ291bnQodmFsdWU6IG51bWJlcikgewogICAgdGhpcy5fY29sdW1uQ291bnQgPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSwgREVGQVVMVF9DT0xVTU5fQ09VTlQpOwogIH0KICBwdWJsaWMgZ2V0IGNvbHVtbkNvdW50KCk6IG51bWJlciB7CiAgICByZXR1cm4gdGhpcy5fY29sdW1uQ291bnQ7CiAgfQogIHByaXZhdGUgX2NvbHVtbkNvdW50OiBudW1iZXIgPSBERUZBVUxUX0NPTFVNTl9DT1VOVDsKCiAgLyoqCiAgICogQWxsb3cgc3RhdGljIGhlYWRlcnMgdG8gYmUgc2V0CiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBzZXQgY29sdW1uSGVhZGVycyh2YWx1ZTogc3RyaW5nW10gfCB1bmRlZmluZWQpIHsKICAgIHRoaXMuX2NvbHVtbkhlYWRlcnMgPSB2YWx1ZTsKICAgIHRoaXMuY2xlYXJIZWFkZXJDZWxscygpOwogICAgdGhpcy5hZGRIZWFkZXJzKHRoaXMuY29sdW1uQ291bnQsIHRoaXMuY29sdW1uSGVhZGVycyk7CiAgfQogIHB1YmxpYyBnZXQgY29sdW1uSGVhZGVycygpOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCB7CiAgICByZXR1cm4gdGhpcy5fY29sdW1uSGVhZGVyczsKICB9CiAgcHJpdmF0ZSBfY29sdW1uSGVhZGVyczogc3RyaW5nW10gfCB1bmRlZmluZWQ7CgogIC8qKgogICAqIERlZmluZSBhbnkgY29sdW1uIHZhbGlkYXRvcnMKICAgKgogICAqIEBwYXJhbSB2YWx1ZQogICAqLwogIEBJbnB1dCgpCiAgcHVibGljIHNldCBjb2x1bW5WYWxpZGF0b3JzKHZhbHVlOiBWYWxpZGF0b3JGbiB8IG51bGxbXSkgewogICAgaWYgKCF2YWx1ZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5fY29sdW1uVmFsaWRhdG9ycyA9IHZhbHVlOwogIH0KICBwdWJsaWMgZ2V0IGNvbHVtblZhbGlkYXRvcnMoKTogVmFsaWRhdG9yRm4gfCBudWxsW10gewogICAgcmV0dXJuIHRoaXMuX2NvbHVtblZhbGlkYXRvcnM7CiAgfQogIHByaXZhdGUgX2NvbHVtblZhbGlkYXRvcnM6IFZhbGlkYXRvckZuIHwgbnVsbFtdID0gW107CgogIC8qKgogICAqIERlZmluZSB0aGUgbGF5b3V0IGRpcmVjdGlvbiBmb3IgdGhlIGZvb3RlcgogICAqLwogIEBJbnB1dCgpCiAgcHVibGljIGZvb3RlckRpcmVjdGlvbjogJ2x0cicgfCAncnRsJyA9ICdsdHInOwoKICAvKioKICAgKiBBbGxvdyBmdWxsLXdpZHRoIG1vZGUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBmdWxsV2lkdGggPSBmYWxzZTsKCiAgLyoqCiAgICogRGVmaW5lIGFuIElEIGZvciB0aGUgY29tcG9uZW50CiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBzZXQgaWQodmFsdWU6IHN0cmluZykgewogICAgdGhpcy5faWQgPSB2YWx1ZSB8fCB0aGlzLnVpZDsKICB9CiAgcHVibGljIGdldCBpZCgpOiBzdHJpbmcgewogICAgcmV0dXJuIHRoaXMuX2lkOwogIH0KICBwcm90ZWN0ZWQgX2lkOiBzdHJpbmcgPSB0aGlzLnVpZDsKCiAgLyoqCiAgICogU2V0IHRoZSBtYXhpbXVtIG51bWJlciBvZiBhbGxvd2VkIHJvd3MKICAgKgogICAqIEBwYXJhbSB2YWx1ZQogICAqLwogIEBJbnB1dCgpCiAgcHVibGljIHNldCBtYXhSb3dzKHZhbHVlOiBudW1iZXIpIHsKICAgIHRoaXMuX21heFJvd3MgPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSwgREVGQVVMVF9NQVhfUk9XUyk7CiAgfQogIHB1YmxpYyBnZXQgbWF4Um93cygpOiBudW1iZXIgewogICAgcmV0dXJuIHRoaXMuX21heFJvd3M7CiAgfQogIHByaXZhdGUgX21heFJvd3M6IG51bWJlciA9IERFRkFVTFRfTUFYX1JPV1M7CgogIC8qKgogICAqIERlZmluZSBvdXRwdXQgdG8gYmUgQ1NWIHJhdGhlciB0aGFuIFRTVgogICAqLwogIEBJbnB1dCgpCiAgcHVibGljIG91dHB1dEZvcm1hdDogJ2NzdicgfCAndHN2JyA9ICd0c3YnOwoKICAvKioKICAgKiBEZWZpbmUgdGhlIG51bWJlciBvZiByb3dzCiAgICoKICAgKiBAcGFyYW0gdmFsdWUKICAgKi8KICBASW5wdXQoKQogIHB1YmxpYyBzZXQgcm93Q291bnQodmFsdWU6IG51bWJlcikgewogICAgdGhpcy5fcm93Q291bnQgPSBjb2VyY2VOdW1iZXJQcm9wZXJ0eSh2YWx1ZSwgREVGQVVMVF9ST1dfQ09VTlQpOwogIH0KICBwdWJsaWMgZ2V0IHJvd0NvdW50KCk6IG51bWJlciB7CiAgICByZXR1cm4gdGhpcy5fcm93Q291bnQ7CiAgfQogIHByaXZhdGUgX3Jvd0NvdW50OiBudW1iZXIgPSBERUZBVUxUX1JPV19DT1VOVDsKCiAgLyoqCiAgICogRW1pdCB0aGUgYnVpbHQgZmlsZSBibG9iCiAgICovCiAgQE91dHB1dCgpCiAgcHVibGljIHJlYWRvbmx5IGJsb2JHZW5lcmF0ZWQ6IEV2ZW50RW1pdHRlcjxCbG9iPiA9IG5ldyBFdmVudEVtaXR0ZXIoKTsKCgogIGNvbnN0cnVjdG9yKAogICAgcHJpdmF0ZSBmb3JtQnVpbGRlcjogRm9ybUJ1aWxkZXIsCiAgICBwcml2YXRlIGNoYW5nZURldGVjdG9yUmVmOiBDaGFuZ2VEZXRlY3RvclJlZiwKICAgIHByaXZhdGUgZG9jdW1lbnRTZXJ2aWNlOiBUc0RvY3VtZW50U2VydmljZSwKICApIHt9CgoKICAvKioKICAgKiBBZGQgY29sdW1ucyB0byBleGlzdGluZyByb3dzICsgaGVhZGVyCiAgICoKICAgKiBAcGFyYW0gcm93cyAtIFRoZSBleGlzdGluZyBib2R5IHJvd3MKICAgKiBAcGFyYW0gaGVhZGVyQ2VsbHMgLSBUaGUgYXJyYXkgb2YgaGVhZGVyIGNlbGxzCiAgICogQHBhcmFtIGNvbHVtbnNUb0FkZCAtIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBhZGQKICAgKi8KICBwcml2YXRlIHN0YXRpYyBhZGRDb2x1bW5zVG9Sb3dzKHJvd3M6IEZvcm1BcnJheSwgaGVhZGVyQ2VsbHM6IEZvcm1BcnJheSwgY29sdW1uc1RvQWRkOiBudW1iZXIpOiB2b2lkIHsKICAgIC8vIEFkZCBjb2x1bW5zIHRvIGJvZHkgcm93cwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgIGNvbnN0IHJvdzogRm9ybUdyb3VwID0gcm93cy5jb250cm9sc1tpXSBhcyBGb3JtR3JvdXA7CiAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICAgIGlmIChyb3cpIHsKICAgICAgICBjb25zdCBjb2x1bW5zID0gcm93LmNvbnRyb2xzLmNvbHVtbnMgYXMgRm9ybUFycmF5OwoKICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvbHVtbnNUb0FkZDsgaiArPSAxKSB7CiAgICAgICAgICBjb2x1bW5zLmNvbnRyb2xzLnB1c2gobmV3IEZvcm1Db250cm9sKCkpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC8vIEFkZCBjb2x1bW5zIHRvIGhlYWRlcgogICAgZm9yIChsZXQgayA9IDA7IGsgPCBjb2x1bW5zVG9BZGQ7IGsgKz0gMSkgewogICAgICBoZWFkZXJDZWxscy5jb250cm9scy5wdXNoKG5ldyBGb3JtQ29udHJvbCgpKTsKICAgIH0KICB9CgogIC8qKgogICAqIFNwbGl0IHBhc3RlZCBkYXRhIGludG8gaGVhZGVycywgcm93cywgYW5kIGNvbHVtbnMKICAgKgogICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGV2ZW50IGNvbnRlbnQKICAgKiBAcGFyYW0gaGFzSGVhZGVycyAtIFdoZXRoZXIgdGhlIGNvbnRlbnQgaGFzIGEgaGVhZGVyIHJvdwogICAqIEByZXR1cm5zIEFuIG9iamVjdCBjb250YWluaW5nIGFsbCBkYXRhCiAgICovCiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkKICBwcml2YXRlIHN0YXRpYyBzcGxpdENvbnRlbnQoY29udGVudDogc3RyaW5nLCBoYXNIZWFkZXJzOiBib29sZWFuKTogUmVjb3JkPHN0cmluZywgYW55PiB7CiAgICBjb25zdCByZXN1bHQ6IHtoZWFkZXJzOiB1bmRlZmluZWR8c3RyaW5nW107IHJvd3M6IHVuZGVmaW5lZHxzdHJpbmdbXXxzdHJpbmdbXVtdfSA9IHsKICAgICAgaGVhZGVyczogdW5kZWZpbmVkLAogICAgICByb3dzOiB1bmRlZmluZWQsCiAgICB9OwogICAgY29uc3Qgcm93cyA9IGNvbnRlbnQuc3BsaXQoJ1xuJyk7CgogICAgaWYgKGhhc0hlYWRlcnMpIHsKICAgICAgcmVzdWx0LmhlYWRlcnMgPSByb3dzWzBdLnNwbGl0KCdcdCcpOwogICAgICByZXN1bHQucm93cyA9IHJvd3Muc2xpY2UoMSwgcm93cy5sZW5ndGgpLm1hcChyID0+IHIuc3BsaXQoJ1x0JykpOwogICAgfSBlbHNlIHsKICAgICAgcmVzdWx0LnJvd3MgPSByb3dzLnNsaWNlKDAsIHJvd3MubGVuZ3RoKS5tYXAociA9PiByLnNwbGl0KCdcdCcpKTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH0KCiAgLyoqCiAgICogSW5pdGlhbGl6ZSBlbXB0eSByb3dzCiAgICovCiAgcHVibGljIG5nT25Jbml0KCk6IHZvaWQgewogICAgdGhpcy5hZGRSb3dzKHRoaXMucm93Q291bnQsIHRoaXMuY29sdW1uQ291bnQpOwogICAgdGhpcy5hZGRIZWFkZXJzKHRoaXMuY29sdW1uQ291bnQsIHRoaXMuY29sdW1uSGVhZGVycyk7CiAgICB0aGlzLm9yaWdpbmFsQ29sdW1uQ291bnQgPSB0aGlzLmNvbHVtbkNvdW50OwoKICAgIHRoaXMucmVjb3Jkc0Zvcm0udmFsdWVDaGFuZ2VzLnBpcGUoCiAgICAgIC8vIExldCB0aGUgZm9ybSB2YWx1ZXMgJ3NldHRsZScgYmVmb3JlIHdlIGVtaXQgYW55dGhpbmcKICAgICAgZGVib3VuY2VUaW1lKDEpLAogICAgICB1bnRpbENvbXBvbmVudERlc3Ryb3llZCh0aGlzKSwKICAgICkuc3Vic2NyaWJlKHYgPT4gewogICAgICBjb25zdCBibG9iID0gdGhpcy5nZW5lcmF0ZUJsb2Iodik7CiAgICAgIHRoaXMuYmxvYkdlbmVyYXRlZC5lbWl0KGJsb2IpOwogICAgfSk7CiAgfQoKICAvKioKICAgKiBOZWVkZWQgZm9yIGB1bnRpbENvbXBvbmVudERlc3Ryb3llZGAKICAgKi8KICBwdWJsaWMgbmdPbkRlc3Ryb3koKTogdm9pZCB7fQoKICAvKioKICAgKiBBZGQgcm93cyB0byB0aGUgZm9ybQogICAqCiAgICogQHBhcmFtIHJvd0NvdW50IC0gVGhlIG51bWJlciBvZiByb3dzIHRvIGFkZAogICAqIEBwYXJhbSBjb2x1bW5Db3VudCAtIFRoZSBudW1iZXIgb2YgY29sdW1ucyBlYWNoIHJvdyBzaG91bGQgaGF2ZQogICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIGNvbHVtbiBjb250ZW50CiAgICogQHBhcmFtIGluZGV4IC0gVGhlIHJvdyBpbmRleAogICAqLwogIHB1YmxpYyBhZGRSb3dzKHJvd0NvdW50ID0gMSwgY29sdW1uQ291bnQ6IG51bWJlciA9IHRoaXMuY29sdW1uQ291bnQsIGNvbnRlbnQ/OiBzdHJpbmdbXVtdLCBpbmRleD86IG51bWJlcik6IHZvaWQgewogICAgaWYgKCh0aGlzLnJvd3MubGVuZ3RoICsgcm93Q291bnQpID4gdGhpcy5tYXhSb3dzKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbWFnaWMtbnVtYmVycwogICAgICBjb25zdCByb3dzVGhhdERvbnRGaXQgPSAocm93Q291bnQgPT09IDEgPyAyIDogcm93Q291bnQpIC0gKCh0aGlzLnJvd3MubGVuZ3RoICsgcm93Q291bnQpIC0gdGhpcy5tYXhSb3dzKTsKICAgICAgdGhpcy50b29NYW55Um93c01lc3NhZ2UgPQogICAgICAgIGBBZGRpbmcgJHtyb3dzVGhhdERvbnRGaXR9IHJvdyR7cm93c1RoYXREb250Rml0ID4gMSA/ICdzJyA6ICcnfSB3b3VsZCBleGNlZWQgdGhlIG1heGltdW0gcm93cyBhbGxvd2VkICgke3RoaXMubWF4Um93c30pLmA7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAodGhpcy50b29NYW55Um93c01lc3NhZ2UpIHsKICAgICAgdGhpcy50b29NYW55Um93c01lc3NhZ2UgPSBudWxsOwogICAgfQoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93Q291bnQ7IGkgKz0gMSkgewogICAgICBjb25zdCBpbmRleFRvSW5qZWN0QXQ6IG51bWJlciA9IChpbmRleCA9PT0gdW5kZWZpbmVkID8gdGhpcy5yb3dDb3VudCA6IGluZGV4KSArIGk7CiAgICAgIGNvbnN0IGM6IHN0cmluZ1tdIHwgbnVsbCA9IGNvbnRlbnQgPyBjb250ZW50W2ldIDogbnVsbDsKICAgICAgY29uc3QgY3JlYXRlZFJvdzogRm9ybUdyb3VwID0gdGhpcy5jcmVhdGVSb3codGhpcy5yb3dzLmxlbmd0aCwgYyk7CgogICAgICBpZiAoKGluZGV4ICE9PSB1bmRlZmluZWQpICYmIChpbmRleCA+PSAwKSkgewogICAgICAgIHRoaXMucm93cy5pbnNlcnQoaW5kZXhUb0luamVjdEF0LCBjcmVhdGVkUm93KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJvd3MucHVzaChjcmVhdGVkUm93KTsKICAgICAgfQogICAgfQogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBjb2x1bW5zIG9mIGEgcm93CiAgICoKICAgKiBAcGFyYW0gcm93IC0gVGhlIHJvdwogICAqIEByZXR1cm5zIFRoZSBhcnJheSBvZiBjb2x1bW5zCiAgICovCiAgcHVibGljIGdldENvbHVtbnMocm93OiBGb3JtR3JvdXApOiBGb3JtQXJyYXkgewogICAgcmV0dXJuIHJvdy5nZXQoJ2NvbHVtbnMnKSBhcyBGb3JtQXJyYXk7CiAgfQoKICAvKioKICAgKiBVcGRhdGUgdGhlIGZvcm0gY29udHJvbCBmb3IgcmVjb3JkSWQgb24gZWFjaCByb3cgYWNjb3JkaW5nIHRvIGluZGV4LgogICAqLwogIHB1YmxpYyB1cGRhdGVBbGxSb3dJZHMoKTogdm9pZCB7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm93cy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCByb3c6IEZvcm1Hcm91cCA9IHRoaXMucm93cy5jb250cm9sc1tpXSBhcyBGb3JtR3JvdXA7CiAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICAgIGlmIChyb3cpIHsKICAgICAgICByb3cuY29udHJvbHMucmVjb3JkSWQuc2V0VmFsdWUoaSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIEhhbmRsZSBwYXN0ZSBldmVudCBmb3Igc3RhbmRhcmQgY29udGVudCBjZWxsCiAgICoKICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgcGFzdGUgZXZlbnQKICAgKiBAcGFyYW0gaGFzSGVhZGVyIC0gV2hldGhlciB0aGUgY29udGVudCBoYXMgYSBoZWFkZXIgcm93CiAgICovCiAgcHVibGljIG9uUGFzdGUoZXZlbnQ6IENsaXBib2FyZEV2ZW50LCBoYXNIZWFkZXI/OiBib29sZWFuKTogdm9pZCB7CiAgICBjb25zdCBldmVudENvbnRlbnQgPSBldmVudC5jbGlwYm9hcmREYXRhPy5nZXREYXRhKCdUZXh0Jyk7CiAgICBpZiAoIWV2ZW50Q29udGVudCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gSWYgdGhlIHVzZXIgaXMgb25seSBwYXN0aW5nIHRoZSBjb250ZW50IGZvciBhIHNpbmdsZSBjZWxsIC0gZG8gbm90aGluZwogICAgY29uc3QgaXNTaW5nbGVDZWxsID0gKGV2ZW50Q29udGVudC5pbmRleE9mKCdcbicpIDwgMCkgJiYgKGV2ZW50Q29udGVudC5pbmRleE9mKCdcdCcpIDwgMCk7CiAgICBpZiAoaXNTaW5nbGVDZWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBoYXNIZWFkZXIgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkoaGFzSGVhZGVyKTsKICAgIGNvbnN0IHBhc3RlZFJvd0lkOiBudW1iZXIgPSBwYXJzZUludCgoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLmlkLnNwbGl0KCdYJylbMF0uc3BsaXQoJ18nKVsyXSwgMTApOwogICAgY29uc3QgY29udGVudCA9IFRzQ1NWRW50cnlDb21wb25lbnQuc3BsaXRDb250ZW50KGV2ZW50Q29udGVudCwgaGFzSGVhZGVyKTsKICAgIGNvbnN0IG5lZWRlZFJvd3M6IG51bWJlciA9IGNvbnRlbnQucm93cy5sZW5ndGg7CgogICAgLy8gSWYgdGhlIHBhc3RlIHdhcyBpbnRvIGEgaGVhZGVyIGNlbGwsIHZlcmlmeSB0aGF0IGhlYWRlciBjZWxsIGNvbnRlbnQgZG9lc24ndCBhbHJlYWR5IGV4aXN0CiAgICBpZiAoaGFzSGVhZGVyKSB7CiAgICAgIHRoaXMuY2xlYXJBbGxSb3dzKCk7CiAgICAgIHRoaXMuY2xlYXJIZWFkZXJDZWxscygpOwogICAgICB0aGlzLmFkZEhlYWRlcnMoY29udGVudC5oZWFkZXJzLmxlbmd0aCwgdGhpcy5jb2x1bW5IZWFkZXJzIHx8IGNvbnRlbnQuaGVhZGVycyk7CiAgICAgIHRoaXMuY29sdW1uQ291bnQgPSBjb250ZW50LmhlYWRlcnMubGVuZ3RoOwogICAgICB0aGlzLmFkZFJvd3MobmVlZGVkUm93cywgY29udGVudC5oZWFkZXJzLmxlbmd0aCwgY29udGVudC5yb3dzKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEVsc2U6IHRoZSBwYXN0ZSBoYXBwZW5lZCBpbiBhIGJvZHkgY2VsbAogICAgICBjb25zdCBwYXN0ZWRDb2x1bW5Db3VudCA9IGNvbnRlbnQucm93c1swXS5sZW5ndGg7CgogICAgICAvLyBJZiBtb3JlIGNvbHVtbnMgd2VyZSBwYXN0ZWQgdGhhbiBjdXJyZW50bHkgZXhpc3QsIGluY3JlYXNlIHRoZSBjb2x1bW4gY291bnQKICAgICAgaWYgKHBhc3RlZENvbHVtbkNvdW50ID4gdGhpcy5jb2x1bW5Db3VudCkgewogICAgICAgIGNvbnN0IG51bWJlck9mTWlzc2luZ0NvbHVtbnMgPSBwYXN0ZWRDb2x1bW5Db3VudCAtIHRoaXMuY29sdW1uQ291bnQ7CiAgICAgICAgVHNDU1ZFbnRyeUNvbXBvbmVudC5hZGRDb2x1bW5zVG9Sb3dzKHRoaXMucm93cywgdGhpcy5oZWFkZXJDZWxscywgbnVtYmVyT2ZNaXNzaW5nQ29sdW1ucyk7CiAgICAgICAgdGhpcy5jb2x1bW5Db3VudCA9IHBhc3RlZENvbHVtbkNvdW50OwogICAgICB9CiAgICAgIHRoaXMuZGVsZXRlUm93KHBhc3RlZFJvd0lkKTsKICAgICAgdGhpcy5hZGRSb3dzKG5lZWRlZFJvd3MsIGNvbnRlbnQucm93cy5sZW5ndGgsIGNvbnRlbnQucm93cywgcGFzdGVkUm93SWQpOwogICAgfQoKICAgIHRoaXMudXBkYXRlQWxsUm93SWRzKCk7CiAgICB0aGlzLnVwZGF0ZUVycm9ycygpOwogICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7CiAgfQoKICAvKioKICAgKiBFeHBvc2UgYWJpbGl0eSB0byB0cmlnZ2VyIGVycm9yIHVwZGF0ZXMgZnJvbSB0aGUgRE9NCiAgICovCiAgcHVibGljIHVwZGF0ZUVycm9ycygpOiB2b2lkIHsKICAgIHRoaXMuYWxsRXJyb3JzID0gdGhpcy5jb2xsZWN0RXJyb3JzKCk7CiAgfQoKICAvKioKICAgKiBIZWxwZXIgdG8gZ2V0IHRoZSBuYW1lIChjb250ZW50KSBvZiBhIGhlYWRlciBjZWxsIGZvciB0aGUgdGl0bGUgYXR0cmlidXRlCiAgICoKICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgY29sdW1uIGluZGV4CiAgICogQHJldHVybnMgVGhlIGhlYWRlciBjZWxsIGNvbnRlbnQKICAgKi8KICBwdWJsaWMgZ2V0SGVhZGVyQ2VsbE5hbWUoaW5kZXg6IG51bWJlcik6IHN0cmluZyB7CiAgICBpZiAoIXRoaXMuaGVhZGVyQ2VsbHMgfHwgIXRoaXMuaGVhZGVyQ2VsbHMuY29udHJvbHNbaW5kZXhdKSB7CiAgICAgIHJldHVybiAnJzsKICAgIH0KICAgIHJldHVybiB0aGlzLmhlYWRlckNlbGxzLmNvbnRyb2xzW2luZGV4XS52YWx1ZTsKICB9CgogIC8qKgogICAqIFN0b3AgYWNjaWRlbnRhbCBwYWdlIG5hdmlnYXRpb24gd2hlbiBzY3JvbGxpbmcgdG8gdGhlIGVkZ2VzIG9mIHRoZSBDU1YgZm9ybQogICAqCiAgICogQHBhcmFtIGV2ZW50IC0gVGhlIHNjcm9sbCB3aGVlbCBldmVudAogICAqLwogIHB1YmxpYyBvblNjcm9sbChldmVudDogV2hlZWxFdmVudCk6IHZvaWQgewogICAgaWYgKCFldmVudCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBkaXI6IHN0cmluZyA9IChldmVudC5kZWx0YVggPCAwKSA/ICdyaWdodCcgOiAnbGVmdCc7CiAgICAvLyBOT1RFOiBUeXBlU2NyaXB0IGRvZXNuJ3QgYmVsaWV2ZSBgZm9ybWAgZXhpc3RzIG9uIGBFdmVudFRhcmdldGAKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICBjb25zdCB0YXJnZXRFbDogYW55ID0gZXZlbnQudGFyZ2V0OwoKICAgIGlmICghdGFyZ2V0RWwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGJvcmRlclNpemUgPSAyOwogICAgY29uc3Qgc2Nyb2xsUmlnaHQ6IG51bWJlciA9CiAgICAgIHRhcmdldEVsLmZvcm0uc2Nyb2xsV2lkdGggLSAocGFyc2VJbnQodGFyZ2V0RWwuZm9ybS5vZmZzZXRXaWR0aCwgMTApICsgYm9yZGVyU2l6ZSkgLSB0YXJnZXRFbC5mb3JtLnNjcm9sbExlZnQ7CiAgICBjb25zdCBzY3JvbGxMZWZ0ID0gdGFyZ2V0RWwuZm9ybS5zY3JvbGxMZWZ0OwogICAgY29uc3Qgc3RvcFJpZ2h0U2Nyb2xsOiBib29sZWFuID0gKGRpciA9PT0gJ3JpZ2h0JykgJiYgKHNjcm9sbExlZnQgPCAxKTsKICAgIGNvbnN0IHN0b3BMZWZ0U2Nyb2xsOiBib29sZWFuID0gKGRpciA9PT0gJ2xlZnQnKSAmJiAoc2Nyb2xsUmlnaHQgPCAxKTsKCiAgICAvLyBJZiBzY3JvbGxpbmcgaG9yaXpvbnRhbGx5IGFuZCBhdCBlaXRoZXIgZWRnZSwgc3RvcCB0aGUgc2Nyb2xsIGV2ZW50CiAgICBpZiAoZXZlbnQuZGVsdGFYICE9PSAwICYmIChzdG9wUmlnaHRTY3JvbGwgfHwgc3RvcExlZnRTY3JvbGwpKSB7CiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICB9CiAgfQoKICAvKioKICAgKiBDaGFuZ2UgZm9jdXMgdG8gdGhlIGNlbGwgYmVsb3cgdGhlIGN1cnJlbnQgY2VsbAogICAqCiAgICogQHBhcmFtIGN1cnJlbnRDZWxsSWQgLSBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNlbGwKICAgKiBAcGFyYW0gdXAgLSBUaGUgZGlyZWN0aW9uIHRvIG1vdmUgKHVwIHZzIGRvd24pCiAgICovCiAgcHVibGljIHNlbGVjdENlbGxJbk5leHRSb3coY3VycmVudENlbGxJZDogc3RyaW5nLCB1cD86IGJvb2xlYW4pOiB2b2lkIHsKICAgIGlmICghY3VycmVudENlbGxJZCkgewogICAgICByZXR1cm47CiAgICB9CiAgICBjb25zdCBbcm93SWQsIGNvbHVtbklkXTogc3RyaW5nW10gPSBjdXJyZW50Q2VsbElkLnNwbGl0KCdYJyk7CiAgICBjb25zdCByb3c6IHN0cmluZyA9IHJvd0lkLnNwbGl0KCdfJylbMl07CiAgICBjb25zdCBjb2x1bW46IHN0cmluZyA9IGNvbHVtbklkLnNwbGl0KCdfJylbMV07CiAgICBjb25zdCBuZXdJZCA9IGAke3RoaXMudWlkfV9yXyR7cGFyc2VJbnQocm93LCAxMCkgKyAodXAgPyAtMSA6IDEpfVhjXyR7Y29sdW1ufWA7CiAgICBjb25zdCBpbnB1dDogSFRNTEVsZW1lbnQgfCBudWxsID0gdGhpcy5kb2N1bWVudFNlcnZpY2UuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7bmV3SWR9YCk7CgogICAgaWYgKGlucHV0KSB7CiAgICAgIGlucHV0LmZvY3VzKCk7CiAgICB9IGVsc2UgewogICAgICAvLyBFbHNlIHdlIG11c3QgYmUgb24gdGhlIGxhc3Qgcm93IHNvIHdlIGFkZCBvbmUgbW9yZQogICAgICB0aGlzLmFkZFJvd3MoKTsKICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7CiAgICAgIHRoaXMuc2VsZWN0Q2VsbEluTmV4dFJvdyhjdXJyZW50Q2VsbElkKTsKICAgIH0KICB9CgogIC8qKgogICAqIFNlbGVjdCB0aGUgbmV4dCBjZWxsIG9yIHByZXZpb3VzIGNlbGwKICAgKgogICAqIEBwYXJhbSBldmVudCAtIFRoZSBLZXlib2FyZEV2ZW50CiAgICogQHBhcmFtIGN1cnJlbnRDZWxsSWQgLSBUaGUgSUQgb2YgdGhlIGN1cnJlbnRseSBmb2N1c2VkIGNlbGwKICAgKiBAcGFyYW0gcHJldmlvdXMgLSBJZiB0aGUgbW92ZW1lbnQgaXMgZm9yd2FyZCBvciBiYWNrd2FyZAogICAqLwogIHB1YmxpYyBzZWxlY3RBZGphY2VudENlbGwoZXZlbnQ6IEtleWJvYXJkRXZlbnQsIGN1cnJlbnRDZWxsSWQ6IHN0cmluZywgcHJldmlvdXM/OiBib29sZWFuKTogdm9pZCB7CiAgICAvLyBQcmV2ZW50IG5hdGl2ZSB0YWJpbmRleCBmdW5jdGlvbmFsaXR5CiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgcHJldmlvdXMgPSBjb2VyY2VCb29sZWFuUHJvcGVydHkocHJldmlvdXMpOwogICAgY29uc3QgW3Jvd0lkLCBjb2x1bW5JZF06IHN0cmluZ1tdID0gY3VycmVudENlbGxJZC5zcGxpdCgnWCcpOwogICAgY29uc3Qgcm93OiBudW1iZXIgPSBwYXJzZUludChyb3dJZC5zcGxpdCgnXycpWzJdLCAxMCk7CiAgICBjb25zdCBjb2x1bW46IG51bWJlciA9IHBhcnNlSW50KGNvbHVtbklkLnNwbGl0KCdfJylbMV0sIDEwKTsKICAgIGNvbnN0IGlzRmlyc3RDb2x1bW46IGJvb2xlYW4gPSBjb2x1bW4gPT09IDA7CiAgICBjb25zdCBpc0xhc3RDb2x1bW46IGJvb2xlYW4gPSBjb2x1bW4gPT09ICh0aGlzLmNvbHVtbkNvdW50IC0gMSk7CiAgICBsZXQgbmV3Q29sdW1uTnVtYmVyOiBudW1iZXI7CiAgICBsZXQgbmV3Um93TnVtYmVyOiBudW1iZXIgPSByb3c7CiAgICAvLyBJZiBmaXJzdCBjb2x1bW4sIG1vdmUgdG8gbGFzdCBjb2x1bW4gb2YgcHJldmlvdXMgcm93CiAgICBpZiAocHJldmlvdXMpIHsKICAgICAgLy8gQmFja3dhcmQKICAgICAgaWYgKGlzRmlyc3RDb2x1bW4pIHsKICAgICAgICBuZXdDb2x1bW5OdW1iZXIgPSB0aGlzLmNvbHVtbkNvdW50IC0gMTsKICAgICAgICBuZXdSb3dOdW1iZXIgKz0gLTE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbmV3Q29sdW1uTnVtYmVyID0gY29sdW1uIC0gMTsKICAgICAgfQogICAgfSBlbHNlIGlmIChpc0xhc3RDb2x1bW4pIHsKICAgICAgLy8gRm9yd2FyZAogICAgICBuZXdDb2x1bW5OdW1iZXIgPSAwOwogICAgICBuZXdSb3dOdW1iZXIgKz0gMTsKICAgIH0gZWxzZSB7CiAgICAgIG5ld0NvbHVtbk51bWJlciA9IGNvbHVtbiArIDE7CiAgICB9CiAgICBjb25zdCBuZXdJZCA9IGAke3RoaXMudWlkfV9yXyR7bmV3Um93TnVtYmVyfVhjXyR7bmV3Q29sdW1uTnVtYmVyfWA7CiAgICBjb25zdCBpbnB1dDogSFRNTEVsZW1lbnQgfCBudWxsID0gdGhpcy5kb2N1bWVudFNlcnZpY2UuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgIyR7bmV3SWR9YCk7CgogICAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UKICAgIGlmIChpbnB1dCkgewogICAgICBpbnB1dC5mb2N1cygpOwogICAgfQogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGFuIElEIGZvciBhIGNlbGwuIEZvcm1hdDogYHRzLWNzdi1lbnRyeS17bnVtYmVyfV9yXzdYY18yYCB3b3VsZCBiZSB0aGUgMm5kIGNlbGwgaW4gdGhlIDd0aCByb3cuCiAgICoKICAgKiBAcGFyYW0gcmVjb3JkSW5kZXggLSBUaGUgaW5kZXggb2YgdGhlIHJlY29yZC9yb3cKICAgKiBAcGFyYW0gY2VsbEluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSBjZWxsIHdpdGhpbiB0aGUgcm93CiAgICogQHJldHVybnMgVGhlIElECiAgICovCiAgcHVibGljIGNyZWF0ZUlkKHJlY29yZEluZGV4OiBudW1iZXIsIGNlbGxJbmRleDogbnVtYmVyKTogc3RyaW5nIHsKICAgIHJldHVybiBgJHt0aGlzLnVpZH1fcl8ke3JlY29yZEluZGV4fVhjXyR7Y2VsbEluZGV4fWA7CiAgfQoKICAvKioKICAgKiBDb2xsZWN0IGFsbCBlcnJvcnMgZnJvbSB0aGUgcmVjb3Jkc0Zvcm0gYW5kIHNldCB0byBhbGxFcnJvcnMKICAgKi8KICBwdWJsaWMgY29sbGVjdEVycm9ycygpOiBUc0NTVkZvcm1FcnJvcltdIHwgbnVsbCB7CiAgICBjb25zdCBncm91cDogRm9ybUFycmF5IHwgbnVsbCA9IHRoaXMucmVjb3Jkc0Zvcm0uZ2V0KCdyZWNvcmRzJykgYXMgRm9ybUFycmF5OwoKICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICBpZiAoZ3JvdXApIHsKICAgICAgY29uc3QgZXJyb3JzID0gdGhpcy5nZXRGb3JtRXJyb3JzKGdyb3VwKTsKCiAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoZXJyb3JzKS5tYXAoa2V5ID0+ICh7CiAgICAgICAgICBjb250cm9sOiBrZXksCiAgICAgICAgICAvLyBEZS1kdXBsaWNhdGUgdGhlIGVycm9ycyBhcnJheQogICAgICAgICAgW2tleV06IGVycm9yc1trZXldLmZpbHRlcigoZWwsIGksIGFycikgPT4gYXJyLmluZGV4T2YoZWwpID09PSBpKSwKICAgICAgICB9KSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgICByZXR1cm4gbnVsbDsKICB9CgogIC8qKgogICAqIEdldCBhbGwgdmFsaWRhdGlvbiBtZXNzYWdlcwogICAqCiAgICogTk9URTogQ3VycmVudGx5IHRoaXMgb25seSBzdXBwb3J0cyBhIGN1c3RvbSBlcnJvciBtZXNzYWdlIGZvciBVUkwgdmFsaWRhdGlvbi4gT3RoZXIgbWVzc2FnZXMgY2FuIGJlIGFkZGVkIHdoZW4gdGhlIG5lZWQgYXJpc2VzLgogICAqIEZJWE1FOiBGaW5kIGEgd2F5IHRvIHVzZSB0aGUgZXhpc3RpbmcgVmFsaWRhdGlvbk1lc3NhZ2VzU2VydmljZQogICAqCiAgICogQHJldHVybnMgVGhlIGFycmF5IG9mIHZhbGlkYXRpb24gbWVzc2FnZXMKICAgKi8KICBwdWJsaWMgZ2V0IHZhbGlkYXRpb25NZXNzYWdlcygpOiBzdHJpbmdbXSB8IHVuZGVmaW5lZCB7CiAgICBpZiAoIXRoaXMuYWxsRXJyb3JzKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CiAgICBjb25zdCBtZXNzYWdlczogc3RyaW5nW10gPSBbXTsKCiAgICBmb3IgKGNvbnN0IGVycm9yT2JqIG9mIHRoaXMuYWxsRXJyb3JzKSB7CiAgICAgIGNvbnN0IG5hbWU6IHN0cmluZyA9IGVycm9yT2JqLmNvbnRyb2w7CgogICAgICBmb3IgKGNvbnN0IGVycm9yIG9mIGVycm9yT2JqW25hbWVdKSB7CiAgICAgICAgbGV0IG1lc3NhZ2UgPSAnJzsKICAgICAgICAvLyBUaGUgSUQgaXMgemVyby1iYXNlZAogICAgICAgIG1lc3NhZ2UgKz0gYDxiPlJvdyAke3BhcnNlSW50KGVycm9yLnJvd0lkLCAxMCkgKyAxfTo8L2I+IGA7CiAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UKICAgICAgICBpZiAobmFtZSA9PT0gJ3VybCcpIHsKICAgICAgICAgIGNvbnN0IG1heEl0ZW1MZW5ndGggPSAyMDsKICAgICAgICAgIGNvbnN0IGVycm9ySXRlbSA9IChlcnJvci5hY3R1YWwubGVuZ3RoID4gbWF4SXRlbUxlbmd0aCkgPyBgJHtlcnJvci5hY3R1YWwuc2xpY2UoMCwgbWF4SXRlbUxlbmd0aCkgIH0uLi5gIDogZXJyb3IuYWN0dWFsOwogICAgICAgICAgbWVzc2FnZSArPSBgIiR7ZXJyb3JJdGVtfSIgaXMgbm90IGEgdmFsaWQgVVJMLmA7CiAgICAgICAgfQogICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBlbHNlCiAgICAgICAgaWYgKG5hbWUgPT09ICdyZXF1aXJlZCcpIHsKICAgICAgICAgIG1lc3NhZ2UgKz0gYENvbnRlbnQgaXMgcmVxdWlyZWQuYDsKICAgICAgICB9CiAgICAgICAgbWVzc2FnZXMucHVzaChtZXNzYWdlKTsKICAgICAgfQogICAgfQoKICAgIC8vIElmIG1vcmUgbWVzc2FnZXMgdGhhbiBhbGxvd2VkIGV4aXN0LCB0cnVuY2F0ZSB0aGUgbGlzdCB3aXRoIGEgbWVzc2FnZQogICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IERFRkFVTFRfVkFMSURBVElPTl9NRVNTQUdFU19NQVgpIHsKICAgICAgY29uc3QgY291bnQgPSBtZXNzYWdlcy5sZW5ndGggLSBERUZBVUxUX1ZBTElEQVRJT05fTUVTU0FHRVNfTUFYOwogICAgICBtZXNzYWdlcy5sZW5ndGggPSBERUZBVUxUX1ZBTElEQVRJT05fTUVTU0FHRVNfTUFYOwogICAgICBtZXNzYWdlcy5wdXNoKGBhbmQgJHtjb3VudH0gbW9yZSBlcnJvcnMuLi5gKTsKICAgIH0KCiAgICByZXR1cm4gbWVzc2FnZXMubGVuZ3RoID4gMCA/IG1lc3NhZ2VzIDogdW5kZWZpbmVkOwogIH0KCiAgLyoqCiAgICogRGVsZXRlIGEgcm93CiAgICoKICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggb2YgdGhlIHJvdyB0byBkZWxldGUKICAgKi8KICBwdWJsaWMgZGVsZXRlUm93KGluZGV4OiBudW1iZXIpOiB2b2lkIHsKICAgIGlmIChpbmRleCA9PT0gdW5kZWZpbmVkIHx8IGluZGV4ID09PSBudWxsIHx8IGluZGV4IDwgMCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5yb3dzLnJlbW92ZUF0KGluZGV4KTsKICAgIHRoaXMudXBkYXRlQWxsUm93SWRzKCk7CiAgICB0aGlzLnVwZGF0ZUVycm9ycygpOwogIH0KCiAgLyoqCiAgICogUmVzZXQgdGhlIHRhYmxlIHRvIGl0J3MgaW5pdGlhbCBzdGF0ZQogICAqLwogIHB1YmxpYyByZXNldFRhYmxlKCk6IHZvaWQgewogICAgdGhpcy5jbGVhckFsbFJvd3MoKTsKICAgIHRoaXMuY2xlYXJIZWFkZXJDZWxscygpOwogICAgdGhpcy5jb2x1bW5Db3VudCA9IHRoaXMub3JpZ2luYWxDb2x1bW5Db3VudDsKICAgIHRoaXMuYWRkUm93cyh0aGlzLnJvd0NvdW50LCB0aGlzLmNvbHVtbkNvdW50KTsKICAgIHRoaXMuYWRkSGVhZGVycyh0aGlzLmNvbHVtbkNvdW50LCB0aGlzLmNvbHVtbkhlYWRlcnMpOwogICAgdGhpcy5hbGxFcnJvcnMgPSBudWxsOwogIH0KCiAgLyoqCiAgICogR2V0IGFsbCBmb3JtIGVycm9ycyBmcm9tIGEgRm9ybUdyb3VwIG9yIEZvcm1BcnJheQogICAqCiAgICogTk9URTogVGhpcyBleHRlcm5hbCBmdW5jdGlvbiBhbmQgYHJlc3VsdGAgb2JqZWN0IGlzIG5lZWRlZCBzaW5jZSBgZ2V0QWxsRXJyb3JzYCBtYXkgYmUgcmVjdXJzaXZlCiAgICoKICAgKiBAcGFyYW0gZm9ybSAtIFRoZSBmb3JtCiAgICogQHJldHVybnMgQW4gb2JqZWN0IGNvbnRhaW5pbmcgYWxsIGVycm9ycwogICAqLwogIHByaXZhdGUgZ2V0Rm9ybUVycm9ycyhmb3JtOiBGb3JtR3JvdXAgfCBGb3JtQXJyYXkpOiB7cmVxdWlyZWQ/OiBUc0NTVlJlcXVpcmVkRXJyb3I7IHVybD86IFRzQ1NWVXJsRXJyb3J9IHsKICAgIGNvbnN0IHJlc3VsdDoge3JlcXVpcmVkPzogVHNDU1ZSZXF1aXJlZEVycm9yOyB1cmw/OiBUc0NTVlVybEVycm9yfSA9IHt9OwogICAgdGhpcy5nZXRBbGxFcnJvcnMoZm9ybSwgcmVzdWx0KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfQoKICAvKioKICAgKiBHZXQgYWxsIGVycm9ycyBmb3IgdGhlIGZvcm0KICAgKgogICAqIEBwYXJhbSBmb3JtIC0gVGhlIHByaW1hcnkgZm9ybSBncm91cAogICAqIEBwYXJhbSByZXN1bHQgLSBUaGUgY29sbGVjdGlvbiBvZiBlcnJvcnMKICAgKiBAcmV0dXJucyBBbiBvYmplY3QgY29udGFpbmluZyBhbGwgZXJyb3JzCiAgICovCiAgcHJpdmF0ZSBnZXRBbGxFcnJvcnMoZm9ybTogRm9ybUdyb3VwIHwgRm9ybUFycmF5LCByZXN1bHQ6IHtyZXF1aXJlZD86IFRzQ1NWUmVxdWlyZWRFcnJvcjsgdXJsPzogVHNDU1ZVcmxFcnJvcn0pOiB2b2lkIHsKICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmb3JtLmNvbnRyb2xzKTsKCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L3ByZWZlci1mb3Itb2YKICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkgKz0gMSkgewogICAgICBjb25zdCBjdHJsID0gZm9ybS5nZXQoa2V5c1tpXSk7CgogICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgZWxzZQogICAgICBpZiAoY3RybCkgewogICAgICAgIGNvbnN0IGVycm9ycyA9IChjdHJsIGluc3RhbmNlb2YgRm9ybUdyb3VwIHx8IGN0cmwgaW5zdGFuY2VvZiBGb3JtQXJyYXkpID8gdGhpcy5nZXRBbGxFcnJvcnMoY3RybCwgcmVzdWx0KSA6IGN0cmwuZXJyb3JzOwoKICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgZWxzZQogICAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICAgIC8vIEdldCB0aGUgcmVjb3JkIElEIGZyb20gdGhlIGdyYW5kcGFyZW50IGNvbnRyb2wKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55CiAgICAgICAgICBjb25zdCBncmFuZHBhcmVudENvbnRyb2xzOiBhbnkgPSBjdHJsLnBhcmVudC5wYXJlbnQuY29udHJvbHM7CiAgICAgICAgICBjb25zdCByb3dJZDogbnVtYmVyIHwgdW5kZWZpbmVkID0gZ3JhbmRwYXJlbnRDb250cm9scy5yZWNvcmRJZAogICAgICAgICAgICA/IGdyYW5kcGFyZW50Q29udHJvbHMucmVjb3JkSWQudmFsdWUgLyogaXN0YW5idWwgaWdub3JlIG5leHQgLSBVbnJlYWNoYWJsZSAqLyA6IHVuZGVmaW5lZDsKICAgICAgICAgIGNvbnN0IGVycm9yS2V5cyA9IE9iamVjdC5rZXlzKGVycm9ycyk7CgogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9wcmVmZXItZm9yLW9mCiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVycm9yS2V5cy5sZW5ndGg7IGogKz0gMSkgewogICAgICAgICAgICBjb25zdCBlcnJvcktleTogc3RyaW5nID0gZXJyb3JLZXlzW2pdOwogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueQogICAgICAgICAgICBsZXQgZXJyb3I6IFJlY29yZDxzdHJpbmcsIGFueT4gPSBlcnJvcnNbZXJyb3JLZXlzW2pdXTsKCiAgICAgICAgICAgIC8vIEFuZ3VsYXIgYnVpbHQgaW4gcmVxdWlyZWQgdmFsaWRhdG9yIG9ubHkgcmV0dXJucyBhIGJvb2xlYW4KICAgICAgICAgICAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICAgICAgZXJyb3IgPSB7IHZhbGlkOiBmYWxzZSB9OwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBJZiB0aGUgcm93SWQgZXhpc3RzLCBhZGQgaXQgdG8gdGhlIGVycm9ycyBvYmplY3QKICAgICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UKICAgICAgICAgICAgaWYgKHJvd0lkICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICBlcnJvci5yb3dJZCA9IHJvd0lkOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBBZGQgdGhpcyBlcnJvciB0byB0aGUgcmVzdWx0IG9iamVjdAogICAgICAgICAgICBpZiAocmVzdWx0W2Vycm9yS2V5XSkgewogICAgICAgICAgICAgIHJlc3VsdFtlcnJvcktleV0ucHVzaChlcnJvcik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmVzdWx0W2Vycm9yS2V5XSA9IFtlcnJvcl07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9CgogIC8qKgogICAqIENsZWFyIGFsbCByb3dzCiAgICovCiAgcHJpdmF0ZSBjbGVhckFsbFJvd3MoKTogdm9pZCB7CiAgICB0aGlzLnJlY29yZHNGb3JtLnNldENvbnRyb2woJ3JlY29yZHMnLCB0aGlzLmZvcm1CdWlsZGVyLmFycmF5KFtdKSk7CiAgfQoKICAvKioKICAgKiBDbGVhciBoZWFkZXIgY2VsbHMKICAgKi8KICBwcml2YXRlIGNsZWFySGVhZGVyQ2VsbHMoKTogdm9pZCB7CiAgICB0aGlzLnJlY29yZHNGb3JtLnNldENvbnRyb2woJ2hlYWRlcnMnLCB0aGlzLmZvcm1CdWlsZGVyLmFycmF5KFtdKSk7CiAgfQoKICAvKioKICAgKiBBZGQgaGVhZGVyIGNvbnRlbnQgdG8gdGhlIGZvcm0KICAgKgogICAqIEBwYXJhbSBoZWFkZXJDb3VudCAtIFRoZSBudW1iZXIgb2YgaGVhZGVyIGNlbGxzCiAgICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY2VsbCdzIGNvbnRlbnQKICAgKi8KICBwcml2YXRlIGFkZEhlYWRlcnMoaGVhZGVyQ291bnQ6IG51bWJlciwgY29udGVudD86IHN0cmluZ1tdKTogdm9pZCB7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWRlckNvdW50OyBpICs9IDEpIHsKICAgICAgY29uc3QgdmFsdWU6IHN0cmluZyB8IG51bGwgPSAoY29udGVudCAmJiBjb250ZW50W2ldKSA/IGNvbnRlbnRbaV0gOiBudWxsOwogICAgICBjb25zdCBjdHJsID0gdmFsdWUgPyBuZXcgRm9ybUNvbnRyb2wodmFsdWUpIDogbmV3IEZvcm1Db250cm9sKCk7CiAgICAgIHRoaXMuaGVhZGVyQ2VsbHMuc2V0Q29udHJvbChpLCBjdHJsKTsKICAgIH0KICB9CgogIC8qKgogICAqIENyZWF0ZSBhIHJvdwogICAqCiAgICogQHBhcmFtIGlkIC0gVGhlIHJvdydzIElECiAgICogQHBhcmFtIGNvbnRlbnQgLSBUaGUgY29sdW1uJ3MgY29udGVudAogICAqIEByZXR1cm5zIFRoZSBGb3JtR3JvdXAKICAgKi8KICBwcml2YXRlIGNyZWF0ZVJvdyhpZDogbnVtYmVyLCBjb250ZW50Pzogc3RyaW5nW10gfCBudWxsKTogRm9ybUdyb3VwIHsKICAgIHJldHVybiB0aGlzLmZvcm1CdWlsZGVyLmdyb3VwKHsKICAgICAgcmVjb3JkSWQ6IG5ldyBGb3JtQ29udHJvbChpZCksCiAgICAgIGNvbHVtbnM6IHRoaXMuZm9ybUJ1aWxkZXIuYXJyYXkodGhpcy5jcmVhdGVDb2x1bW5zKHRoaXMuY29sdW1uQ291bnQsIGNvbnRlbnQpKSwKICAgIH0pOwogIH0KCiAgLyoqCiAgICogQ3JlYXRlIGFuIGFycmF5IG9mIGNvbHVtbnMKICAgKgogICAqIEBwYXJhbSBjb3VudCAtIFRoZSBudW1iZXIgb2YgY29sdW1ucyB0byBjcmVhdGUKICAgKiBAcGFyYW0gY29udGVudCAtIEFuIGFycmF5IG9mIGNvbnRlbnQgdG8gc2VlZCB0aGUgY29sdW1ucyB3aXRoCiAgICogQHJldHVybnMgVGhlIGFycmF5IG9mIGZvcm0gY29udHJvbHMKICAgKi8KICBwcml2YXRlIGNyZWF0ZUNvbHVtbnMoY291bnQ6IG51bWJlciwgY29udGVudD86IHN0cmluZ1tdIHwgbnVsbCk6IEZvcm1Db250cm9sW10gewogICAgY29uc3QgY29sdW1uczogRm9ybUNvbnRyb2xbXSA9IFtdOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkgewogICAgICBsZXQgdmFsdWU6IHN0cmluZyB8IG51bGwgPSAoY29udGVudCAmJiBjb250ZW50W2ldKSA/IGNvbnRlbnRbaV0gOiBudWxsOwoKICAgICAgLy8gU3RyaXAgYW55IGNvbnRyb2wgY2hhcmFjdGVycwogICAgICBpZiAodmFsdWUpIHsKICAgICAgICB2YWx1ZSA9IHN0cmlwQ29udHJvbENoYXJhY3RlcnModmFsdWUpOwogICAgICB9CgogICAgICBjb25zdCB2YWxpZGF0b3I6IFZhbGlkYXRvckZuIHwgbnVsbCA9CiAgICAgICAgdGhpcy5jb2x1bW5WYWxpZGF0b3JzID8gdGhpcy5jb2x1bW5WYWxpZGF0b3JzW2ldIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0IC0gVW5yZWFjaGFibGUgKi8gOiBudWxsOwogICAgICBjb2x1bW5zLnB1c2gobmV3IEZvcm1Db250cm9sKHZhbHVlLCB2YWxpZGF0b3IpKTsKICAgIH0KCiAgICByZXR1cm4gY29sdW1uczsKICB9CgogIC8qKgogICAqIEdlbmVyYXRlIGEgRmlsZSBibG9iIGZyb20gdGhlIGZvcm0gY29udGVudHMKICAgKgogICAqIEBwYXJhbSBjb250ZW50IC0gVGhlIHJlY29yZEZvcm0gY29udGVudAogICAqIEByZXR1cm5zIFRoZSBGaWxlIGJsb2IKICAgKi8KICBwcml2YXRlIGdlbmVyYXRlQmxvYihjb250ZW50OiBUc0NTVkZvcm1Db250ZW50cyk6IEJsb2IgewogICAgY29uc3QgcHJlZml4ID0gJ2RhdGE6dGV4dC9jc3Y7Y2hhcnNldD11dGYtOCwnOwogICAgY29uc3QgaGVhZGVycyA9IGAke2NvbnRlbnQuaGVhZGVycy5qb2luKCdcdCcpICB9XHJcbmA7CiAgICAvLyBFbmNhcHN1bGF0ZSBjb250ZW50IHdpdGggcXVvdGVzIGFuZCBlc2NhcGUgYW55IGV4aXN0aW5nIHF1b3RlcwogICAgY29uc3Qgcm93cyA9CiAgICAgIGAke2NvbnRlbnQucmVjb3Jkcy5tYXAodiA9PiB2LmNvbHVtbnMubWFwKGNvbHVtbiA9PiAoY29sdW1uID8gYCIke2NvbHVtbi5yZXBsYWNlKC8iL2csICciIicpfSJgIDogJycpKS5qb2luKCdcdCcpKQogICAgICAgIC5qb2luKCdcclxuJykgIH1cclxuYDsKICAgIGxldCBqb2luZWQ6IHN0cmluZyA9IHByZWZpeCArIGhlYWRlcnMgKyByb3dzOwogICAgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UKICAgIGlmICh0aGlzLm91dHB1dEZvcm1hdCA9PT0gJ2NzdicpIHsKICAgICAgam9pbmVkID0gSlNPTi5zdHJpbmdpZnkoam9pbmVkKS5yZXBsYWNlKC9cXHQvZywgJywnKTsKICAgIH0KCiAgICByZXR1cm4gbmV3IEJsb2IoW2pvaW5lZF0sIHsgdHlwZTogJ3RleHQvY3N2JyB9KTsKICB9Cn0K</text>
      </register>
      <register name="1" type="2">
        <text encoding="base64">ICAgICAgICA8YnV0dG9uIChjbGljayk9ImN1c3RvbVJlc2V0KCkiPkN1c3RvbSByZXNldCBidXR0b248L2J1dHRvbj4K</text>
      </register>
      <register name="2" type="2">
        <text encoding="base64">ICAgICAgPC9saT4K</text>
      </register>
      <register name="3" type="2">
        <text encoding="base64">ICAgICAgPGxpPgo=</text>
      </register>
      <register name="4" type="2">
        <text encoding="base64">ICAgICAgY29uc29sZS5sb2coJ0NVU1RPTSBSRVNFVCcpOwo=</text>
      </register>
      <register name="5" type="2">
        <text encoding="base64">ICAgICAgICAgICAgICBbZnVsbFdpZHRoXT0idHJ1ZSIK</text>
      </register>
      <register name="6" type="2">
        <text encoding="base64">aW1wb3J0IHsgVHNDYXJkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vbGlicmFyeS9jYXJkL3NyYy9jYXJkLmNvbXBvbmVudCc7Cg==</text>
      </register>
      <register name="7" type="2">
        <text encoding="base64">Cg==</text>
      </register>
      <register name="8" type="2">
        <text encoding="base64">ICBAVmlld0NoaWxkKCd0c0NTVkVudHJ5JykK</text>
      </register>
      <register name="9" type="2">
        <text encoding="base64">ICAgICAgCg==</text>
      </register>
      <register name=":" type="4">
        <text>noh</text>
      </register>
    </registers>
  </component>
  <component name="VimSearchSettings">
    <search>
      <last-search>reset</last-search>
      <last-offset />
      <last-pattern>reset</last-pattern>
      <last-replace>tsFooterCellDef</last-replace>
      <last-substitute>matFooterCellDef</last-substitute>
      <last-dir>1</last-dir>
      <show-last>true</show-last>
    </search>
  </component>
  <component name="VimSettings">
    <state version="6" enabled="true" />
    <notifications>
      <idea-join enabled="true" />
      <idea-put enabled="true" />
    </notifications>
  </component>
</application>